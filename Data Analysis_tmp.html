<!DOCTYPE html>
<html>
<head>
<title>Data Analysis.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%B1%95%E7%A4%BA">Python数据分析与展示</h1>
<p><strong>Github</strong>：https://github.com/IvenStarry<br>
<strong>学习视频网站</strong>：<br>
中国大学MOOC北京理工大学嵩天教授 https://www.icourse163.org/course/BIT-1001870002?tid=1472922453<br>
菜鸟网 https://www.runoob.com/</p>
<h2 id="numpy">NumPy</h2>
<p><strong>NumPy</strong></p>
<ol>
<li>是一个开源的Python科学计算基础库</li>
<li>有一个强大的N维数组对象ndarray</li>
<li>广播功能函数</li>
<li>整合C/C++/Fortran代码的工具</li>
<li>线性代数、傅里叶变换、随机数生成等功能</li>
<li>是SciPy、Pandas等数据处理或科学计算库的基础</li>
</ol>
<h3 id="%E6%95%B0%E6%8D%AE%E7%9A%84%E7%BB%B4%E5%BA%A6">数据的维度</h3>
<p><strong>维度</strong>是一组数据的组织形式</p>
<p><strong>列表和数组区别</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">数据结构</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">列表</td>
<td style="text-align:center">数据类型可以不同</td>
</tr>
<tr>
<td style="text-align:center">数组</td>
<td style="text-align:center">数据类型相同</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p><strong>不同维度数据的组成</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">维度</th>
<th style="text-align:center">概念</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">一维数据</td>
<td style="text-align:center">由对等关系的有序或无序数据构成，采用线性方式组织</td>
</tr>
<tr>
<td style="text-align:center">二维数据</td>
<td style="text-align:center">由多个一维数据构成，是一维数据的组合形式（表格）</td>
</tr>
<tr>
<td style="text-align:center">多维数据</td>
<td style="text-align:center">由一维或二维数据在新维度上扩展得来</td>
</tr>
<tr>
<td style="text-align:center">高维数据</td>
<td style="text-align:center">仅利用最近的二元关系展示数据间的复杂结构（字典）</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p><strong>数据维度的Python表示</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">维度</th>
<th style="text-align:center">在Python的表示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">一维数据</td>
<td style="text-align:center">列表和集合</td>
</tr>
<tr>
<td style="text-align:center">二维数据</td>
<td style="text-align:center">列表</td>
</tr>
<tr>
<td style="text-align:center">多维数据</td>
<td style="text-align:center">列表</td>
</tr>
<tr>
<td style="text-align:center">高维数据</td>
<td style="text-align:center">字典或数据表示格式（JSON、XML、YAML）</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h3 id="numpy%E7%9A%84%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1ndarray">NumPy的数组对象ndarray</h3>
<p><strong>N维数组对象ndarray</strong></p>
<ol>
<li>数组对象可以去掉元素间运算所需的循环，使一维向量更像单个数据</li>
<li>设置专门的数组对象，提升运算速度（底层代码由C语言编写）<br>
采用相同的数据类型，助于节省运算和存储空间</li>
<li>ndarray是一个多维数组对象，由两部分构成：实际的数据，描述这些数据的元数据（数据维度、数据类型）</li>
<li>一般要求所有元素类型相同，数组下标从0开始</li>
</ol>
<p><strong>np.array</strong>生成一个ndarray数组 输出成[]形式，元素用空格分割<br>
<strong>轴</strong>(axis):保存数据的维度 <strong>秩</strong>:轴的数量
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407211328315.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407211329907.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407211329850.png" alt=""></p>
<p>python仅支持<strong>整数</strong>、<strong>浮点数</strong>和<strong>复数</strong>3种类型<br>
科学计算设计数据较多，对存储和性能有较高要求，对元素类型精确定义有助于NumPy合理使用存储空间并优化性能，也有助于程序员对程序规模合理评估</p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># x = np.array(list/tuple, dtype='int32', ndmin) 可以指定数据类型</span>
<span class="hljs-comment"># 从列表</span>
x = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], dtype=np.float64)
print(x)
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], dtype=complex)
print(x)
<span class="hljs-comment"># 从元组</span>
x = np.array((<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))
print(x)
<span class="hljs-comment"># 从列表和元组混合类型创建</span>
x = np.array(([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]))
print(x)
<span class="hljs-comment"># ndmin 指定生成数组的最小维度</span>
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], ndmin=<span class="hljs-number">2</span>)
print(x)
</div></code></pre>
<h3 id="%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># bool_ int_ uint8 float_ complex_</span>

<span class="hljs-comment"># todo dtype(object, align, copy) 转换为的数据类型对象 True填充字段使其类似C的结构体 复制dtype对象，若为false则是对内置数据类型对象的引用</span>
dt = np.dtype(np.int32)
print(dt)
<span class="hljs-comment"># int8 int16 int32 int64 四种数据类型可以使用字符串'i1' 'i2' 'i4' 'i8'代替</span>
dt = np.dtype(<span class="hljs-string">'i4'</span>)
print(dt)
<span class="hljs-comment"># 字节顺序标注  &lt;意味着小端法（低位字节存储在低位地址） &gt;意味着大端法（高位字节存放在低位地址）</span>
dt = np.dtype(<span class="hljs-string">'&lt;i4'</span>)
print(dt)
<span class="hljs-comment"># 创建结构化数据类型</span>
dt = np.dtype([(<span class="hljs-string">'age'</span>, np.int8)])
print(dt)
<span class="hljs-comment"># 数据类型应用于ndarray对象</span>
a = np.array([(<span class="hljs-number">10</span>, ), (<span class="hljs-number">20</span>, ), (<span class="hljs-number">30</span>, )], dtype=dt)
print(a)
<span class="hljs-comment"># 类型字段名用于存取实际的age列</span>
print(a[<span class="hljs-string">'age'</span>])
<span class="hljs-comment"># 定义一个结构化数据类型，将这个dtype应用于ndarray对象</span>
student = np.dtype([(<span class="hljs-string">'name'</span>, <span class="hljs-string">'S20'</span>), (<span class="hljs-string">'age'</span>, <span class="hljs-string">'i1'</span>), (<span class="hljs-string">'marks'</span>, <span class="hljs-string">'f4'</span>)])
print(student)
a = np.array([(<span class="hljs-string">'abc'</span>, <span class="hljs-number">21</span>, <span class="hljs-number">50</span>), (<span class="hljs-string">'xyz'</span>, <span class="hljs-number">18</span>, <span class="hljs-number">75</span>)], dtype=student)
print(a)

<span class="hljs-string">"""
内建类型符号
b bool
i int
u uint
f float
c 复数浮点型
m timedelta 时间间隔
M datetime 日期时间
O python对象
S, a (byte)字符串
U unicode 统一码 编码格式 数字到文字的映射
V 原始数据(void)
"""</span>
</div></code></pre>
<h3 id="%E6%95%B0%E6%8D%AE%E5%B1%9E%E6%80%A7">数据属性</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
a = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>]])

<span class="hljs-string">"""
ndarray对象属性：
1. .ndim 轴的数量或维度的数量
2. .shape 对象的尺度，对于矩阵 n行m列
3. .size 对象元素的个数 相当于n*m
4. .dtype 元素类型
5. .itemsize 对象的每个元素的大小，以字节为单位
6. .flags 返回ndarray对象的内存信息 ：包含了
    C_CONTIGUOUS : True      数据在一个单一C风格的连续段中
    F_CONTIGUOUS : False     数据是在一个单一的Fortan风格的连续段中
    OWNDATA : True           数组拥有它所使用的内存或从另外一个对象中借用它  
    WRITEABLE : True         数据区域可以被写入 若False则只可读  
    ALIGNED : True           数据和元素都适当对齐在硬件上
    WRITEBACKIFCOPY : False  这个数组是其他数组的一个副本。当这个数组被释放时，原数组将更新
"""</span>
print(a.ndim)
print(a.shape)
print(a.size)
print(a.dtype)
print(a.itemsize)
print(a.flags)

<span class="hljs-comment"># 可以由非同质对象构成(在numpy2.0.0版本中不支持 回退1.23.0版本才可以实现)</span>
<span class="hljs-comment"># 非同质ndarray对象无法发挥numpy优势 应避免书写</span>
<span class="hljs-comment"># x = np.array([[0, 1, 2, 3, 4], [5, 6, 7, 8]])</span>
<span class="hljs-comment"># print(x) </span>
<span class="hljs-comment"># print(x.shape) # (2, )</span>
<span class="hljs-comment"># print(x.size) # 2</span>
<span class="hljs-comment"># # 元素为对象类型</span>
<span class="hljs-comment"># print(x.dtype) # ('0')</span>
<span class="hljs-comment"># print(x.itemsize) # 4</span>
</div></code></pre>
<h3 id="%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84">创建数组</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># empty(shape, dtype=float, order='C') 生成未初始化数组 order 可选"C"或"F"代表行优先或列有限，在计算机内存中的存储元素的顺序</span>
x = np.empty([<span class="hljs-number">3</span>, <span class="hljs-number">2</span>], dtype=int)
print(x) <span class="hljs-comment"># 数组元素随机值</span>

<span class="hljs-comment"># np.arange(n) 生成从0到n-1的adarray数组 返回整数型数据</span>
x = np.arange(<span class="hljs-number">10</span>)
print(x)

<span class="hljs-comment"># np.ones(shape) 生成和shape大小一致的全1矩阵，shape是元组类型 数据类型默认浮点型</span>
x = np.ones((<span class="hljs-number">2</span>, <span class="hljs-number">5</span>))
print(x)
x = np.ones((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment"># 从外到内 最外层两个元素 每个元素三个维度 每个维度四个元素</span>
print(x)

<span class="hljs-comment"># np.zeros(shape) 生成和shape大小一致的全0矩阵，shape是元组类型 数据类型默认浮点型(可以指定数据类型)</span>
x = np.zeros((<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), dtype=np.int_)
print(x)

<span class="hljs-comment"># np.full(shape, val) 生成和shape大小一致的全val矩阵</span>
x = np.full((<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), <span class="hljs-number">10</span>)
print(x)

<span class="hljs-comment"># np.eye(n) 生成n*n的单位矩阵 对角线为1 其余为0 数据类型默认浮点型</span>
x = np.eye(<span class="hljs-number">5</span>)
print(x)

a = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]], [[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], [[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>]]]
<span class="hljs-comment"># np.ones_like(a) 根据数组a的形状生成全1数组 subok 为True时，使用object的内部数据类型； 为False时，使用数组的数据类型</span>
<span class="hljs-comment">#创建矩阵</span>
a=np.asmatrix([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>])
<span class="hljs-comment">#输出为矩阵类型</span>
print(type(a))
<span class="hljs-comment">#既要赋值一份副本，又要保持原类型</span>
at=np.array(a,subok=<span class="hljs-literal">True</span>)
af=np.array(a) <span class="hljs-comment">#默认为False</span>
print(<span class="hljs-string">'at.subok为True:'</span>,type(at))
print(<span class="hljs-string">'af.subok为False:'</span>,type(af))
print(id(af),id(a))

<span class="hljs-comment"># np.zeros_like(a,order="K") 根据数组a的形状生成全0数组 order默认K保留输入数组的存储顺序 可选C F</span>
x = np.zeros_like(a)
print(x)

<span class="hljs-comment"># np.full_like(a, val) 根据数组a的形状生成全val数组</span>
x = np.full_like(a, <span class="hljs-number">5</span>)
print(x)
</div></code></pre>
<h3 id="%E4%BB%8E%E5%B7%B2%E6%9C%89%E7%9A%84%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84">从已有的数组创建数组</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># asarray(a, dtype, order) 类似array 参数比array少俩</span>
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
a = np.asarray(x)
print(a)

<span class="hljs-comment"># 元组转换ndarray</span>
x = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
a = np.asarray(x)
print(a)

<span class="hljs-comment"># 元组列表转换ndarray 高版本无法生成非同质数组</span>
<span class="hljs-comment"># // x = [(1, 2 , 3), (4, 5)]</span>
<span class="hljs-comment"># // a = np.asarray(x)</span>
<span class="hljs-comment"># // print(a)</span>

<span class="hljs-comment"># frombuffer(buffer, dtype, count=-1, offset) 实现动态数组 接受buffer输入参数 以流的形式读取转化成ndarray对象 </span>
<span class="hljs-comment"># offset读取起始位置 默认0   b" "前缀表示：后面字符串是bytes 类型</span>
s = <span class="hljs-string">b'Hello World!'</span>
a = np.frombuffer(s, dtype=<span class="hljs-string">'S1'</span>)
print(a)

<span class="hljs-comment"># fromiter(iterable, dtype, count=-1) 从迭代对象中建立ndarray对象，返回一维数组</span>
list = range(<span class="hljs-number">5</span>)
it = iter(list)
x = np.fromiter(it, dtype=float)
print(x)
</div></code></pre>
<h3 id="%E4%BB%8E%E6%95%B0%E5%80%BC%E8%8C%83%E5%9B%B4%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84">从数值范围创建数组</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># np.arange(start, stop, step, dtype)不包含stop</span>
x = np.arange(<span class="hljs-number">10</span>)
print(x)
x = np.arange(<span class="hljs-number">10</span>, dtype=float)
print(x)
x = np.arange(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">2</span>)
print(x)

<span class="hljs-comment"># np.linspace(start, end, num, endpoint=True, retstep=False, dtype) </span>
<span class="hljs-comment"># num数组元素个数 4个元素有三个间隔 间隔为(10-1)/3=3</span>
a = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">4</span>)
print(a)
<span class="hljs-comment"># 若设置endpoint为False 则不以end这个数结尾 但仍生成4个数 5个元素（包括10）有四个间隔 间隔变为(10-1)/4=2.25</span>
b = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">4</span>, endpoint=<span class="hljs-literal">False</span>)
print(b)
<span class="hljs-comment"># 设置间距 retstep为True时，生成的数组显示间距</span>
a = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, retstep=<span class="hljs-literal">True</span>)
print(a)
b = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>).reshape([<span class="hljs-number">10</span>,<span class="hljs-number">1</span>])
print(b)

<span class="hljs-comment"># np.logspace(s, s, num, endpoint, base=10.0, dtype) base log的对数</span>
a = np.logspace(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">10</span>)
print(a)
</div></code></pre>
<h3 id="%E5%88%87%E7%89%87%E5%92%8C%E7%B4%A2%E5%BC%95">切片和索引</h3>
<pre class="hljs"><code><div><span class="hljs-string">'''
索引：获取数组中特定位置的元素
切片：获取数组元素子集的过程
'''</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 一维数组</span>
a = np.array([<span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">33</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>])
print(a[<span class="hljs-number">2</span>])
s = slice(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># 索引2 到索引4停止</span>
print(a[s])
print(a[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>:<span class="hljs-number">2</span>]) <span class="hljs-comment"># 同python列表 start end(not include) step</span>

<span class="hljs-comment"># 多维数组</span>
a = np.arange(<span class="hljs-number">24</span>).reshape((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
print(a)
print(a[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
print(a[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>])
print(a[<span class="hljs-number">-1</span>, <span class="hljs-number">-2</span>, <span class="hljs-number">-3</span>])
print(a[:, <span class="hljs-number">1</span>, <span class="hljs-number">-3</span>]) <span class="hljs-comment"># 第一个维度全选 第二个维度取索引为1的元素 第三个维度选索引为-3的元素</span>
print(a[:, <span class="hljs-number">1</span>:<span class="hljs-number">3</span>, :])
print(a[:, :, ::<span class="hljs-number">2</span>])
print(a[..., ::<span class="hljs-number">2</span>]) <span class="hljs-comment"># 有...代表全选前面所有维度 ：只能全选一个维度 ...可以全选所有维度</span>

print(<span class="hljs-string">'-----------------------------'</span>)
print(a[<span class="hljs-number">0</span>, ...])
print(a[<span class="hljs-number">0</span>, ..., :])
print(a[<span class="hljs-number">0</span>, :, :])
</div></code></pre>
<h3 id="%E9%AB%98%E7%BA%A7%E7%B4%A2%E5%BC%95">高级索引</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 整数数组索引 使用一个数组访问另一个数组元素</span>
x = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])
y = x[[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>]] <span class="hljs-comment"># 第一个维度的索引[0, 1, 2] 第二个维度的索引[0, 1, 0]</span>
print(y)

x = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]])
print(<span class="hljs-string">f'数组是:\n<span class="hljs-subst">{x}</span>'</span>)
rows = [[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>]]
cols = [[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>]]
print(<span class="hljs-string">f'四个角的元素为:\n<span class="hljs-subst">{x[rows, cols]}</span>'</span>)

a = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])
b = a[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>, <span class="hljs-number">1</span>:<span class="hljs-number">3</span>]
c = a[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]]
d = a[...,<span class="hljs-number">1</span>:]
print(b)
print(c)
print(d)

<span class="hljs-comment"># 布尔索引 通过布尔运算获取符合指定条件的元素的数组</span>
x = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]])
print(x[x &gt; <span class="hljs-number">5</span>])
a = np.array([np.nan, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, np.nan, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]) <span class="hljs-comment"># nan 非数字元素</span>
print(a[~np.isnan(a)]) <span class="hljs-comment"># isnan检测数组的非数字元素 ~取补运算符</span>
a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>+<span class="hljs-number">6j</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5J</span>, <span class="hljs-number">5</span>])
print(a[np.iscomplex(a)]) <span class="hljs-comment"># iscomplex检测数组的复数元素</span>

<span class="hljs-comment"># 花式索引 根据索引数组的值作为目标数组的某个轴的下标来取值</span>
x = np.arange(<span class="hljs-number">9</span>)
print(x)
y = x[[<span class="hljs-number">0</span>, <span class="hljs-number">6</span>]]
print(y)
print(y[<span class="hljs-number">0</span>])
print(y[<span class="hljs-number">1</span>])

<span class="hljs-comment"># 二维数组</span>
x = np.arange(<span class="hljs-number">32</span>).reshape((<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))
print(x)
print(x[[<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>]])
print(x[[<span class="hljs-number">-4</span>, <span class="hljs-number">-2</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-7</span>]])
<span class="hljs-string">"""
np.ix_ 输入两个数组，产生笛卡尔积的映射关系
e.g. A=(a,b) B=(0,1,2)
A * B = {(a,0), (a,1), (a,2), (b,0), (b,1), (b,2)}
B * A = {(0,a), (1,a), (2,a), (0,b), (1,b), (2,b)}
"""</span>
x = np.arange(<span class="hljs-number">32</span>).reshape((<span class="hljs-number">8</span>,<span class="hljs-number">-1</span>))
print(x[np.ix_([<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])])
</div></code></pre>
<h3 id="%E5%B9%BF%E6%92%AD">广播</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407231519075.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
b = np.array([<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>])
c = a * b
print(c)

<span class="hljs-comment"># 广播Broadcast 对不同形状的数组进行数值计算的方式</span>
a = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">20</span>, <span class="hljs-number">20</span>, <span class="hljs-number">20</span>], [<span class="hljs-number">30</span>, <span class="hljs-number">30</span>, <span class="hljs-number">30</span>]])
b = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>])
print(b.shape)
print(a + b) <span class="hljs-comment"># 将b延伸至与a维度大小相同</span>

<span class="hljs-comment"># np.tile(a, reps) reps：对应的英文单词为repeats，list表示，reps表示对A的各个axis进行重复的次数</span>
bb = np.tile(b, (<span class="hljs-number">4</span>, <span class="hljs-number">1</span>))
print(bb)
print(a + bb)
<span class="hljs-string">"""
广播触发机制 两个数组a b 
两个矩阵在一个维度上数据宽度相同 但在另一个维度上数据宽度不同
并且形状小的矩阵 在数据宽度不同的的这一维度只有一个元素
e.g.a.shape=(4,3)而b.shape=(1,3)，两个矩阵axis=1的数据宽度是相同的，但是axis=0的数据宽度不一样，
并且b.shape[0]=1，这就是广播机制的触发条件，numpy会把b沿axis=0的方向复制4份，即形状变成(4, 3)，与a的一致，接下来就是对应位相加即可
"""</span>
</div></code></pre>
<h3 id="%E8%BF%AD%E4%BB%A3%E6%95%B0%E7%BB%84">迭代数组</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># 迭代器np.nditer 可以完成对数组元素的访问</span>

a = np.arange(<span class="hljs-number">6</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
print(a)
print(<span class="hljs-string">"迭代输出数组："</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a):
    print(x, end=<span class="hljs-string">' '</span>)
print(<span class="hljs-string">'\n---------------------'</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a.T):
    print(x, end=<span class="hljs-string">' '</span>)
print(<span class="hljs-string">'\n---------------------'</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a.T.copy(order=<span class="hljs-string">'C'</span>)):
    print(x, end=<span class="hljs-string">' '</span>)
<span class="hljs-comment"># a和a.T的遍历顺序一样，是因为选择的顺序和数组a的内存布局一样（行序优先C） 但a.T.copy(order='C')的遍历结果不一样，因为指定了a.T的行序优先</span>

<span class="hljs-comment"># 在copy中控制遍历排序</span>
print(<span class="hljs-string">'\n---------------------'</span>)
print(<span class="hljs-string">"以C风格顺序排序"</span>)
b = a.T.copy(order=<span class="hljs-string">'C'</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(b):
    print(x, end=<span class="hljs-string">' '</span>)
print(<span class="hljs-string">'\n---------------------'</span>)
print(<span class="hljs-string">"以F风格顺序排序"</span>)
b = a.T.copy(order=<span class="hljs-string">'F'</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(b):
    print(x, end=<span class="hljs-string">' '</span>)

<span class="hljs-comment"># 在nditer中控制遍历排序</span>
print(<span class="hljs-string">'\n---------------------'</span>)
print(<span class="hljs-string">"以C风格顺序排序"</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a.T, order=<span class="hljs-string">'C'</span>):
    print(x, end=<span class="hljs-string">' '</span>)
print(<span class="hljs-string">'\n---------------------'</span>)
print(<span class="hljs-string">"以F风格顺序排序"</span>)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a.T, order=<span class="hljs-string">'F'</span>):
    print(x, end=<span class="hljs-string">' '</span>)

<span class="hljs-comment"># nditer对象默认将遍历的数组视为只读对象，设置参数op_flags可以在遍历同时，对数组进行修改，指定readwrite或writeonly模式</span>
print(<span class="hljs-string">'修改之前的数组：'</span>)
print(a)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a, op_flags=[<span class="hljs-string">'readwrite'</span>]):
    <span class="hljs-comment"># * 使用x = 2 + x是无法完成对数组a的修改操作的。因为直接赋值操作将会创建一个新的数组，而不会修改原始的数组 a。</span>
    <span class="hljs-comment"># * 要修改原始数组 a 中的值，需要使用 x[...] = 2 + x 这种形式的赋值语句，以确保对a进行原地修改。</span>
    x[...] = <span class="hljs-number">2</span> + x
print(<span class="hljs-string">'修改之后的数组：'</span>)
print(a)

<span class="hljs-comment"># flags参数： c_index 跟随C顺序的索引 f_index 跟随Fortan顺序的索引 multi_index 每次迭代可以跟踪一种索引类型 external_loop 给出的值是具有多个值的一维数组而不是零维数组</span>
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.nditer(a, flags = [<span class="hljs-string">"external_loop"</span>], order = <span class="hljs-string">'F'</span>):
    print(x, end=<span class="hljs-string">' '</span>)

<span class="hljs-comment"># 广播迭代 a(3,4) b(1,4)</span>
a = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">60</span>, <span class="hljs-number">5</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
b = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=int)
print(<span class="hljs-string">'\on'</span>)
print(a)
print(b)
<span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> np.nditer([a, b]):
    print(<span class="hljs-string">f"<span class="hljs-subst">{x}</span>,<span class="hljs-subst">{y}</span>"</span>, end=<span class="hljs-string">' '</span>)
</div></code></pre>
<h3 id="%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C">数组操作</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># todo 修改数组形状</span>
<span class="hljs-comment"># reshape(a, newshape, order='C) 不改变数据的条件下修改形状</span>
a = np.arange(<span class="hljs-number">8</span>)
b = a.reshape(<span class="hljs-number">4</span>,<span class="hljs-number">2</span>)
print(a)
print(b)

<span class="hljs-comment"># flat 数组元素迭代器</span>
a = np.arange(<span class="hljs-number">9</span>).reshape(<span class="hljs-number">3</span> ,<span class="hljs-number">3</span>)
print(<span class="hljs-string">'-----------------------------'</span>)
print(a)
<span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> a:
    print(row)
<span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> a.flat:
    print(element)

<span class="hljs-comment"># numpy.ndarray.flatten(order='C) 数组降维，返回折叠后的一维数组，原数组不变</span>
a = np.arange(<span class="hljs-number">8</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)
print(<span class="hljs-string">'-----------------------------'</span>)
print(a)
print(a.flatten())
print(a.flatten(order=<span class="hljs-string">'F'</span>))

<span class="hljs-comment"># ravel(a, order='C) 展平的数组元素 返回数组视图 修改影响原数组 C按行 F按列 A原顺序 K元素在内存的出现顺序</span>
a = np.arange(<span class="hljs-number">8</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)
print(<span class="hljs-string">'-----------------------------'</span>)
print(a)
print(a.ravel())
print(a.ravel(order=<span class="hljs-string">'F'</span>))

<span class="hljs-comment"># todo 翻转数组</span>
<span class="hljs-comment"># transpose(a, axes) 对换数组维度</span>
a = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
print(<span class="hljs-string">'-----------------------------'</span>)
print(a)
print(np.transpose(a))
print(a.T)

<span class="hljs-comment"># rollaxis(a, axis, start) 函数向后滚动特定的轴到一个特定位置 axis 向后滚动的轴 axis滚动到start轴前面 其他轴相对位置不变</span>
a = np.arange(<span class="hljs-number">8</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
print(<span class="hljs-string">'-----------------------------'</span>)
print(a)
print(np.where(a==<span class="hljs-number">6</span>))
print(a[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>])
<span class="hljs-comment"># 将轴2滚动到轴0</span>
b = np.rollaxis(a, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)
print(b)
print(np.where(b==<span class="hljs-number">6</span>))
<span class="hljs-comment"># 将轴2滚动到轴1</span>
c = np.rollaxis(a, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
print(c)
print(np.where(c==<span class="hljs-number">6</span>))
<span class="hljs-string">'''
<span class="hljs-meta">&gt;&gt;&gt; </span>a = np.ones((3,4,5,6))
<span class="hljs-meta">&gt;&gt;&gt; </span>np.rollaxis(a, 3, 1).shape
(3, 6, 4, 5)
<span class="hljs-meta">&gt;&gt;&gt; </span>np.rollaxis(a, 2).shape
(5, 3, 4, 6)
<span class="hljs-meta">&gt;&gt;&gt; </span>np.rollaxis(a, 1, 4).shape
(3, 5, 6, 4)

三维数组array(轴0，轴1，轴2),将轴2滚动到轴0位置，其余轴顺序不变，即new_array(轴2，轴0，轴1)
元素[1,1,0]		[0,1,1]
'''</span>

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># .swapaxes(ax1, ax2) 将数组的n个维度的2个维度调换 返回新数组 类似转置</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])
print(a)
b = a.swapaxes(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
print(b)

<span class="hljs-comment"># todo 修改数组维度</span>
print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># broadcast 模仿广播的对象 返回一个对象 该对象封装了将一个数组广播到另一个数组的结果</span>
x = np.array([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>]])
y = np.array([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])
print(x.shape, y.shape)
b = np.broadcast(x, y) <span class="hljs-comment"># 对y广播x </span>
r, c = b.iters <span class="hljs-comment"># 自带迭代器属性</span>
print(next(r), next(c))
print(next(r), next(c))
print(<span class="hljs-string">f'广播对象的形状<span class="hljs-subst">{b.shape}</span>'</span>)
b = np.broadcast(x, y)
c = np.empty(b.shape)
print(c.shape)
c.flat = [u + v <span class="hljs-keyword">for</span> (u, v) <span class="hljs-keyword">in</span> b]
print(c)
print(x + y)

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># broadcast_to(a, shape, subok) 将数组广播到新形状 在原始数组返回只读视图 若新形状不符合广播规则，则error</span>
a = np.arange(<span class="hljs-number">4</span>).reshape(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)
print(a)
print(np.broadcast_to(a, (<span class="hljs-number">4</span>,<span class="hljs-number">4</span>)))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># expand_dims(a, axis) 在指定位置插入新的轴扩展数组形状</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
print(a)
print(np.expand_dims(a, axis=<span class="hljs-number">0</span>))
print(np.expand_dims(a, axis=<span class="hljs-number">0</span>).shape, a.shape)
print(np.expand_dims(a, axis=<span class="hljs-number">1</span>))
print(a.ndim, np.expand_dims(x, axis=<span class="hljs-number">1</span>).ndim)
print(np.expand_dims(a, axis=<span class="hljs-number">1</span>).shape, a.shape)

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># squeeze(a, axis) 从给定数组的形状中删除一维的条目</span>
a = np.arange(<span class="hljs-number">9</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
print(a)
print(np.squeeze(a))
print(a.shape, np.squeeze(a).shape)

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># todo 连接数组</span>
<span class="hljs-comment"># np.concatenate((a1, a2, ...), axis=0) 两个或多个数组合并成一个新的数组</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
b = np.array([[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])
x = np.concatenate((a, b))
print(x)
x = np.concatenate((a, b), <span class="hljs-number">1</span>)
print(x)

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># stack(a, axis) 沿着新的轴堆叠数组序列</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
b = np.array([[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])
print(np.stack((a, b), <span class="hljs-number">0</span>))
print(np.stack((a, b), <span class="hljs-number">1</span>))
print(np.stack((a, b), <span class="hljs-number">2</span>))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># hstack((a1, a2, ...)) 水平堆叠</span>
print(np.hstack((a, b)))
print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># vstack((a1, a2, ...)) 垂直堆叠 </span>
print(np.vstack((a, b)))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># todo 分割数组</span>
<span class="hljs-comment"># split(a, indices_or_sections, axis) 沿特定的轴将数组分割成子数组 </span>
<span class="hljs-comment"># indices_or_sections:若为整数，用该数平均切分；若为数组，为沿轴切分的位置（左开右闭）</span>
<span class="hljs-comment"># axis：沿着哪个方向切分 默认0 横向切分 为1纵向切分</span>
a = np.arange(<span class="hljs-number">9</span>)
print(a)
print(np.split(a, <span class="hljs-number">3</span>))
print(np.split(a, [<span class="hljs-number">4</span>, <span class="hljs-number">7</span>]))
a = np.arange(<span class="hljs-number">16</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)
print(a)
print(np.split(a, <span class="hljs-number">2</span>))
print(np.split(a, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># hsplit(a, num) 水平分割数组 num:要返回的相同形状的数组数量</span>
a = np.arange(<span class="hljs-number">16</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)
print(a)
print(np.hsplit(a, <span class="hljs-number">2</span>))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># vsplit 垂直分割数组</span>
print(a)
print(np.vsplit(a, <span class="hljs-number">2</span>))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># todo 数组元素的添加与删除</span>
<span class="hljs-comment"># resize(a, shape) 修改原数组</span>
a = np.arange(<span class="hljs-number">16</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)
print(a)
print(np.resize(a, (<span class="hljs-number">2</span>,<span class="hljs-number">8</span>)))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># append(a, values, axis=None) None 横向加成返回一维数组</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])
print(a)
print(np.append(a, [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]))
print(np.append(a, [[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]], <span class="hljs-number">0</span>))
print(np.append(a, [[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>]], <span class="hljs-number">1</span>))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># insert(a, obj, values, axis) obj:在其之前插入值的索引 axis:未传入值则返回一维数组</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])
print(a)
print(np.insert(a, <span class="hljs-number">3</span>, [<span class="hljs-number">11</span>, <span class="hljs-number">12</span>]))
print(np.insert(a, <span class="hljs-number">1</span>, [<span class="hljs-number">11</span>], axis=<span class="hljs-number">0</span>)) <span class="hljs-comment"># 轴0广播</span>
print(np.insert(a, <span class="hljs-number">1</span>, <span class="hljs-number">11</span>, axis=<span class="hljs-number">1</span>)) <span class="hljs-comment"># 轴1广播</span>

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># delete(a, obj, axis) obj 删除的数字或数组</span>
a = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
print(a)
print(np.delete(a, <span class="hljs-number">5</span>))
print(np.delete(a, <span class="hljs-number">1</span>, axis=<span class="hljs-number">1</span>))
print(np.delete(a, np.s_[::<span class="hljs-number">2</span>]))

print(<span class="hljs-string">'-----------------------------'</span>)
<span class="hljs-comment"># unique(a, return_index, return_inverse, return_counts) 去除数组中的重复元素</span>
<span class="hljs-comment"># return_index True 返回新列表元素在旧列表中的位置（下标），并以列表形式存储</span>
<span class="hljs-comment"># return_inverse True 返回旧列表元素在新列表中的位置（下标），并以列表形式存储</span>
<span class="hljs-comment"># return_counts True 返回去重数组中的元素在原数组的出现次数</span>
a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>])
print(a)
print(np.unique(a, return_index=<span class="hljs-literal">True</span>))
print(np.unique(a, return_inverse=<span class="hljs-literal">True</span>))
print(np.unique(a, return_counts=<span class="hljs-literal">True</span>))


<span class="hljs-comment"># .astype(new_type) 转化数据类型 创建新数组</span>
print(a)
x = a.astype(np.float64)
print(x)

<span class="hljs-comment"># .tolist() ndarray数组向列表转换</span>
x = a.tolist()
print(type(x))
</div></code></pre>
<h3 id="%E4%BD%8D%E8%BF%90%E7%AE%97">位运算</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 位运算</span>
a1 = np.array([<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>], dtype=bool)
a2 = np.array([<span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>], dtype=bool)

result_and = np.bitwise_and(a1, a2) <span class="hljs-comment"># 按位与</span>
result_or = np.bitwise_or(a1, a2) <span class="hljs-comment"># 按位或</span>
result_xor = np.bitwise_xor(a1, a2) <span class="hljs-comment"># 按位异或</span>
result_not = np.bitwise_not(a1) <span class="hljs-comment"># 按位取反</span>

print(<span class="hljs-string">'and:'</span>, result_and)
print(<span class="hljs-string">'or:'</span>, result_or)
print(<span class="hljs-string">'xor:'</span>, result_xor)
print(<span class="hljs-string">'not'</span>, result_not)

<span class="hljs-comment"># invert 按位取反 1 00000001 2 00000010    补码取反 -1 11111110 转原码 10000010  补码取反 11111101 转原码 10000011</span>
print(<span class="hljs-string">'Invert:'</span>, np.invert(np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], dtype=np.int8)))

<span class="hljs-comment"># left_shift 左移位运算</span>
print(bin(<span class="hljs-number">5</span>),bin(np.left_shift(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)))
print(<span class="hljs-string">'Left shift:'</span>, np.left_shift(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)) <span class="hljs-comment"># 00101 -&gt; 10100</span>

<span class="hljs-comment"># right_shift 右移位运算</span>
print(bin(<span class="hljs-number">10</span>),bin(np.left_shift(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>)))
print(<span class="hljs-string">'Right shift'</span>, np.right_shift(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>)) <span class="hljs-comment"># 01010 -&gt; 00101</span>

<span class="hljs-string">'''
操作符运算
&amp; 与运算
| 或运算
^ 异或运算
~ 取反运算
&lt;&lt; 左移运算
&gt;&gt; 右移运算
'''</span> 
</div></code></pre>
<h3 id="%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0">字符串函数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># char.add() 两个数组的字符串连接</span>
print(np.char.add(<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>))
print(np.char.add([<span class="hljs-string">'hello'</span>, <span class="hljs-string">'hi'</span>], [<span class="hljs-string">'world'</span>, <span class="hljs-string">'nihao~'</span>]))

<span class="hljs-comment"># char.multiply(a, num) 执行多重连接 num重复次数</span>
print(np.char.multiply(<span class="hljs-string">'Iven'</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># char.center(str, width, fillchar) 将字符串居中，指定字符在左侧和右侧进行填充 width:填充后整体长度 fillchar:填充字符</span>
print(np.char.center(<span class="hljs-string">'Iven'</span>, <span class="hljs-number">10</span>, fillchar=<span class="hljs-string">'*'</span>))

<span class="hljs-comment"># char.capitalize() 将字符串的第一个字母转换大写</span>
print(np.char.capitalize(<span class="hljs-string">'rosennn'</span>))

<span class="hljs-comment"># char.title() 对数组的每个单词的第一个字母转为大写</span>
print(np.char.title(<span class="hljs-string">'rosenn enjoys surfing'</span>))

<span class="hljs-comment"># char.lower() 对数组的每个元素转换小写，对每个元素调用str.lower</span>
print(np.char.lower(<span class="hljs-string">'IVEN'</span>))

<span class="hljs-comment"># char.upper() 对数组的每个元素转换大写，对每个元素调用str.upper</span>
print(np.char.upper([<span class="hljs-string">'iven'</span>, <span class="hljs-string">'rosenn'</span>]))

<span class="hljs-comment"># char.split(str, sep) 指定分隔符对字符串进行分割，返回数组 默认分隔符是空格</span>
print(np.char.split(<span class="hljs-string">'i like coding'</span>))
print(np.char.split(<span class="hljs-string">'www.github.com'</span>), sep=<span class="hljs-string">'.'</span>)

<span class="hljs-comment"># char.splitlines() 以换行符作为分隔符来分割字符串，返回数组  \r\n都可以作为换行符</span>
print(np.char.splitlines(<span class="hljs-string">'Iven\nlikes it'</span>))
print(np.char.splitlines(<span class="hljs-string">'Iven\rlikes it'</span>))

<span class="hljs-comment"># char.strip() 移除开头或结尾的特定字符</span>
print(np.char.strip(<span class="hljs-string">'abbbbacc'</span>, <span class="hljs-string">'a'</span>))

<span class="hljs-comment"># char.join() 通过指定分隔符来连接数组中的元素或字符串</span>
print(np.char.join([<span class="hljs-string">':'</span>, <span class="hljs-string">'-'</span>], [<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Starry'</span>]))

<span class="hljs-comment"># char.replace(str, old, new) 使用新字符串替换字符串的所有子字符串</span>
print(np.char.replace(<span class="hljs-string">'i like coffee'</span>, <span class="hljs-string">'ff'</span>, <span class="hljs-string">'fffff'</span>))

<span class="hljs-comment"># char.encode() 对数组中每个元素都调用str.encode函数进行编码,默认编码UTF-8</span>
print(np.char.encode(<span class="hljs-string">'Iven'</span>,<span class="hljs-string">'cp500'</span>)) <span class="hljs-comment"># cp500是编码类型</span>
print(np.char.encode(<span class="hljs-string">'Iven'</span>,<span class="hljs-string">'ascii'</span>)) <span class="hljs-comment"># ascii是编码类型</span>
print(np.char.encode(<span class="hljs-string">'Iven'</span>))         <span class="hljs-comment"># 默认是uft-8编码</span>

<span class="hljs-comment"># char.decode() 对编码元素进行str.decode()解码</span>
<span class="hljs-comment"># char.encode() 对数组中每个元素都调用str.encode函数,默认编码UTF-8</span>
a = np.char.encode(<span class="hljs-string">'Iven'</span>,<span class="hljs-string">'cp500'</span>)
b = np.char.encode(<span class="hljs-string">'Iven'</span>,<span class="hljs-string">'ascii'</span>)
c = np.char.encode(<span class="hljs-string">'Iven'</span>)
print(np.char.decode(a,<span class="hljs-string">'cp500'</span>)) <span class="hljs-comment"># cp500是编码类型</span>
print(np.char.decode(b,<span class="hljs-string">'ascii'</span>)) <span class="hljs-comment"># ascii是编码类型</span>
print(np.char.decode(c))         <span class="hljs-comment"># 默认是uft-8编码</span>

</div></code></pre>
<h3 id="%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0">数学函数</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407221446226.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407221447426.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407221455310.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># sin cos  tan arccos arcsin arctan</span>
a = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">30</span>, <span class="hljs-number">45</span>, <span class="hljs-number">60</span>, <span class="hljs-number">90</span>])
print(np.sin(a * np.pi / <span class="hljs-number">180</span>))
print(np.cos(a * np.pi / <span class="hljs-number">180</span>))
print(np.tan(a * np.pi / <span class="hljs-number">180</span>))
<span class="hljs-comment"># np.degrees(将弧度转换为角度)</span>
print(np.degrees(np.arcsin(np.sin(a * np.pi / <span class="hljs-number">180</span>)))) 
print(np.degrees(np.arccos(np.cos(a * np.pi / <span class="hljs-number">180</span>))))
print(np.degrees(np.arctan(np.tan(a * np.pi / <span class="hljs-number">180</span>))))

<span class="hljs-comment"># around(a, decimals) 返回四舍五入值 decimals:舍入的位数 默认0  如果为负数，整数将四舍五入到小数点左侧的位置</span>
a = np.array([<span class="hljs-number">1.0</span>, <span class="hljs-number">5.55</span>, <span class="hljs-number">123</span>, <span class="hljs-number">0.567</span>, <span class="hljs-number">25.532</span>])
print(a)
print(np.around(a))
print(np.around(a, decimals=<span class="hljs-number">1</span>))
print(np.around(a, decimals=<span class="hljs-number">-1</span>))
print(np.around(a, decimals=<span class="hljs-number">-2</span>))

<span class="hljs-comment"># floor 返回小于或等于表达式的最大整数 向下取整</span>
<span class="hljs-comment"># ceil  返回大于或等于表达式的最小整数 向上取整</span>
a = np.array([<span class="hljs-number">-1.7</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">-0.2</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">10</span>])
print(np.floor(a))
print(np.ceil(a))
</div></code></pre>
<h3 id="%E7%AE%97%E6%9C%AF%E5%87%BD%E6%95%B0">算术函数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 加减乘除 add subtract multiply divide</span>
a = np.arange(<span class="hljs-number">9</span>, dtype=np.float64).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)
b = np.array([<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>])
print(np.add(a, b))
print(np.subtract(a, b))
print(np.multiply(a, b))
print(np.divide(a, b))

<span class="hljs-comment"># reciprocal() 返回参数各元素的倒数</span>
a = np.array([<span class="hljs-number">0.25</span>, <span class="hljs-number">1.33</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100</span>])
print(a)
print(np.reciprocal(a))

<span class="hljs-comment"># power() 将第一个输入数组中的元素作为底数，计算它与第二个输入数组中相应元素的幂 x^n</span>
a = np.array([<span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">1000</span>])
print(a)
print(np.power(a, <span class="hljs-number">2</span>))
b = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
print(np.power(a, b))

<span class="hljs-comment"># np.mod np.remainder 计算输入数组中相应元素的相除后的余数 </span>
a = np.array([<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>])
b = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>])
print(np.mod(a, b))
print(np.remainder(a, b))


a = np.arange(<span class="hljs-number">24</span>).reshape((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
print(<span class="hljs-string">f"平方运算:<span class="hljs-subst">{np.square(a)}</span>"</span>)
print(<span class="hljs-string">f"开方运算：<span class="hljs-subst">{np.sqrt(a)}</span>"</span>)
print(<span class="hljs-string">f"整数小数分离<span class="hljs-subst">{np.modf(np.sqrt(a))}</span>"</span>) <span class="hljs-comment"># np.modf()将整数和小数部分分成两个部分</span>

b = np.sqrt(a)
print(a)
print(b)
print(np.maximum(a, b)) <span class="hljs-comment"># 输出结果浮点数</span>
print(a &gt; b)
</div></code></pre>
<h3 id="%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0">统计函数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

print(<span class="hljs-string">'--------------amin amax----------------'</span>)
<span class="hljs-comment"># amin amax 沿指定轴找最大最小值</span>
<span class="hljs-string">'''
amin amax(a, axis=None, out=None, keepdims=&lt;no value&gt;, initial=&lt;no value&gt;, where=&lt;no value&gt;)
axis：在哪个轴上计算最大最小值
out：指定结果存储位置
keepdims：True将保持结果数组的维度数目与输入数组相同 False 去除计算后维度为1的轴
initial：指定一个初始值，然后在数组的元素上计算最大最小值
where：布尔数组 指定只考虑只满足条件的数组
'''</span>
a = np.array([[<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>],[<span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>]])
print(np.amin(a))
print(np.amin(a, <span class="hljs-number">1</span>))
print(np.amin(a, <span class="hljs-number">0</span>))
print(np.amax(a))
print(np.amax(a, <span class="hljs-number">1</span>))
print(np.amax(a, <span class="hljs-number">0</span>))

print(<span class="hljs-string">'--------------ptp----------------'</span>)
<span class="hljs-comment"># ptp(a) a中元素最大值和最小值之差 参数选择同上</span>
print(np.ptp(a))
print(np.ptp(a, axis=<span class="hljs-number">1</span>))
print(np.ptp(a, axis=<span class="hljs-number">0</span>))

print(<span class="hljs-string">'--------------percentile----------------'</span>)
<span class="hljs-comment"># percentile(a, q, axis) 表示小于这个值的观察值的百分比 q计算的百分位数0-100 该值=(最大值-最小值)*p + 最小值</span>
print(np.percentile(a, <span class="hljs-number">50</span>))
print(np.percentile(a, <span class="hljs-number">50</span>, axis=<span class="hljs-number">1</span>))
print(np.percentile(a, <span class="hljs-number">50</span>, axis=<span class="hljs-number">0</span>))
print(np.percentile(a, <span class="hljs-number">50</span>, axis=<span class="hljs-number">0</span>, keepdims=<span class="hljs-literal">True</span>))

print(<span class="hljs-string">'--------------median----------------'</span>)
<span class="hljs-comment"># median(a) 元素中位数</span>
print(np.median(a))
print(np.median(a, axis=<span class="hljs-number">0</span>))
print(np.median(a, axis=<span class="hljs-number">1</span>))

print(<span class="hljs-string">'--------------mean----------------'</span>)
<span class="hljs-comment"># mean(a, axis=None) 计算数组a的axis轴所有元素期望 默认全部轴</span>
print(np.mean(a))
print(np.mean(a, axis=<span class="hljs-number">0</span>))
print(np.mean(a, axis=<span class="hljs-number">1</span>))

print(<span class="hljs-string">'--------------average----------------'</span>)
<span class="hljs-comment"># average(a, axis=None, weights=None, returned=False) 计算数组a的axis轴所有元素加权平均值 默认全部轴  若为True同时返回加权平均值和权重综合</span>
print(np.average(a, axis=<span class="hljs-number">0</span>, weights=[<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>]))
print(np.average(a, axis=<span class="hljs-number">0</span>, weights=[<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>], returned=<span class="hljs-literal">True</span>))

print(<span class="hljs-string">'--------------std----------------'</span>)
<span class="hljs-comment"># std(a, axis=None) 计算数组a的axis轴所有元素标准差 默认全部轴</span>
<span class="hljs-comment"># std = sqrt(mean((x - x.mean()) ** 2))</span>
print(np.std(a))

print(<span class="hljs-string">'--------------var----------------'</span>)
<span class="hljs-comment"># var(a, axis=None) 计算数组a的axis轴所有元素方差 默认全部轴</span>
print(np.var(a))

print(<span class="hljs-string">'--------------sum----------------'</span>)
<span class="hljs-comment"># sum(a, axis=None) 计算数组a的axis轴所有元素之和 默认全部轴</span>
print(np.sum(a))

print(<span class="hljs-string">'--------------min max----------------'</span>)
<span class="hljs-comment"># min(a) max(a) 最小值最大值</span>
print(np.min(a), np.max(a))
</div></code></pre>
<h3 id="%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%9D%A1%E4%BB%B6%E7%AD%9B%E9%80%89%E5%87%BD%E6%95%B0">排序与条件筛选函数</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407261734838.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># sort(a, axis, kind, order) 返回输入数组的排序副本 kind 默认快速排序 order如果数组包含字段则是要排序的字段</span>
a = np.array([[<span class="hljs-number">3</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">1</span>]])
print(a)
print(np.sort(a))
print(np.sort(a, axis=<span class="hljs-number">0</span>))
<span class="hljs-comment"># msort(a) 数组第一个轴排序 等于sort(a, axis=0) numpy2.0被删除</span>
<span class="hljs-comment"># // print(np.msort(a))</span>

dt = np.dtype([(<span class="hljs-string">'name'</span>, <span class="hljs-string">'S10'</span>), (<span class="hljs-string">'age'</span>, int)])
a = np.array([(<span class="hljs-string">'Iven'</span>, <span class="hljs-number">22</span>), (<span class="hljs-string">'Rosenn'</span>, <span class="hljs-number">21</span>), (<span class="hljs-string">'bob'</span>, <span class="hljs-number">23</span>), (<span class="hljs-string">'starry'</span>, <span class="hljs-number">19</span>)], dtype=dt)
print(a)
print(np.sort(a, order=<span class="hljs-string">'name'</span>)) <span class="hljs-comment"># 注意大小写ascii码不同</span>

<span class="hljs-comment"># argsort 返回数组值从小到大的索引值</span>
a = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>])
print(a)
print(np.argsort(a))
print(a[np.argsort(a)]) <span class="hljs-comment"># 重构原数组</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> np.argsort(a) :
    print(a[i], end=<span class="hljs-string">' '</span>) <span class="hljs-comment"># 循环重构原数组</span>
print(<span class="hljs-string">'\n'</span>)

<span class="hljs-comment"># lexsort 对多个序列进行排序 优先排靠后的一列 在这里即a 排完a相同再排b</span>
a = np.array([<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Iven'</span>, <span class="hljs-string">'starry'</span>])
b = (<span class="hljs-string">'s'</span>, <span class="hljs-string">'s'</span>, <span class="hljs-string">'f'</span>, <span class="hljs-string">'f'</span>)
ind = np.lexsort((b, a))
print(ind)
print([a[i] + <span class="hljs-string">', '</span> + b[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ind])

<span class="hljs-comment"># sort_complex 复数排序 现排实部后虚部 从小到大</span>
a = np.array([<span class="hljs-number">1</span>+<span class="hljs-number">2j</span>, <span class="hljs-number">1</span><span class="hljs-number">-2j</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>+<span class="hljs-number">1j</span>, <span class="hljs-number">1</span>+<span class="hljs-number">3j</span>])
print(np.sort_complex(a))

<span class="hljs-comment"># partition(a, kth[, axis, kind, order]) 指定一个数，对数组进行分区</span>
a = np.array([<span class="hljs-number">232</span>, <span class="hljs-number">564</span>, <span class="hljs-number">278</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-10</span>, <span class="hljs-number">-30</span>, <span class="hljs-number">-40</span>])
print(np.partition(a, <span class="hljs-number">4</span>)) <span class="hljs-comment"># 指定排序后的数组索引为3的数 比这个数小的排这个数前 比这个数大的排后面</span>
print(np.partition(a, (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>))) <span class="hljs-comment"># 小于1(-30)在前面，大于3(-1)的在后面，1和3之间的在中间，顺序无所谓</span>

<span class="hljs-comment"># argmin(a) argmax(a) 默认求a中元素最小值、最大值的降到一维后下标 指定axis求在该轴的下标索引</span>
a = np.array([[<span class="hljs-number">3</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">1</span>]])
print(np.argmin(a), np.argmax(a))
print(np.argmin(a, axis=<span class="hljs-number">0</span>), np.argmin(a, axis=<span class="hljs-number">1</span>), np.argmax(a, axis=<span class="hljs-number">0</span>), np.argmax(a, axis=<span class="hljs-number">1</span>))

<span class="hljs-comment"># nonzero() 返回输入数组中非零元素的索引</span>
a = np.array([[<span class="hljs-number">30</span>, <span class="hljs-number">40</span> ,<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">50</span>, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>]])
print(np.nonzero(a))

<span class="hljs-comment"># where() 返回输入数组中满足给定条件的元素索引</span>
a = np.arange(<span class="hljs-number">9.</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)
print(a)
print(np.where(a &gt; <span class="hljs-number">3</span>)) <span class="hljs-comment"># 返回索引</span>
print(a[np.where(a &gt; <span class="hljs-number">3</span>)]) <span class="hljs-comment"># 利用索引获取元素</span>

<span class="hljs-comment"># extract() 根据某个条件从数组中抽取元素，返回满条件的元素</span>
condition = np.mod(a, <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>
print(condition)
print(np.extract(condition, a))

<span class="hljs-comment"># unravel_index(index, shape) 根据shape将一维下标index转多维下标</span>
print(np.unravel_index(np.argmax(a), a.shape))

</div></code></pre>
<h3 id="%E9%9A%8F%E6%9C%BA%E6%95%B0%E5%87%BD%E6%95%B0">随机数函数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># rand() 随机数数组 浮点数 符合均匀分布 [0, 1)</span>
a = np.random.rand(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
print(a)

<span class="hljs-comment"># randn() 标准正态分布</span>
a = np.random.randn(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
print(a)

<span class="hljs-comment"># randint(low, high, shape) 随机整数数组 [low, high)</span>
<span class="hljs-comment"># seed() 使用同样的seed种子 生成的随机数数组相同</span>
np.random.seed(<span class="hljs-number">10</span>)
a = np.random.randint(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
print(a)
np.random.seed(<span class="hljs-number">10</span>)
b = np.random.randint(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
print(b)

<span class="hljs-comment"># shuffle 数组的第一轴进行随即变换 改变原数组</span>
np.random.shuffle(a)
print(a)
np.random.shuffle(a)
print(a)

<span class="hljs-comment"># permutation() 数组的第一轴进行随机变换 不改变原数组 生成新数组</span>
b = np.random.permutation(a)
print(b)

<span class="hljs-comment"># choice(a, size, replace, p) 从一维数组中以概率p抽取元素 形成size形状新数组 replace是否重用新元素 默认True值</span>
a = np.random.randint(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, (<span class="hljs-number">8</span>,))
print(a)
print(np.random.choice(a, (<span class="hljs-number">3</span>,<span class="hljs-number">2</span>)))
print(np.random.choice(a, (<span class="hljs-number">3</span>,<span class="hljs-number">2</span>), replace=<span class="hljs-literal">False</span>))
print(np.random.choice(a, (<span class="hljs-number">3</span>,<span class="hljs-number">2</span>), p=a/np.sum(a)))

<span class="hljs-comment"># uniform(low, high, size) 均匀分布数组</span>
print(np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)))
<span class="hljs-comment"># normal(loc, scale, size) 正态分布数组 loc均值 scale标准差</span>
print(np.random.normal(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)))
<span class="hljs-comment"># poisson(lam, size)       柏松分布数组 lam随机事件发生率 </span>
print(np.random.poisson(<span class="hljs-number">0.5</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)))
</div></code></pre>
<h3 id="%E6%A2%AF%E5%BA%A6%E5%87%BD%E6%95%B0">梯度函数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-string">'''
gradient(f) 计算数组f元素的梯度 当f多维 返回每一个维度梯度 
一维数组：存在俩侧值 斜率=（右侧值-左侧值）/ 2
只存在一侧值 斜率=（本身-左侧值） 或者 （右侧值-本身）
二维数组：存在两个梯度值 横向一个 纵向一个 输出两个数组 第一个数组输出最外层维度梯度 第二个数组输出第第二层维度梯度
'''</span>

a = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, (<span class="hljs-number">5</span>))
print(a)
print(np.gradient(a))

b = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">5</span>))
print(b)
print(np.gradient(b))
</div></code></pre>
<h3 id="%E5%AD%97%E8%8A%82%E4%BA%A4%E6%8D%A2">字节交换</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407262349034.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># np.adarray.byteswap() 将ndarray每个元素的字节进行大小端转换</span>
a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">245</span>, <span class="hljs-number">8755</span>], dtype=np.int16)
print(a)
print(list(map(hex, a))) <span class="hljs-comment"># hex 16进制编码</span>
print(a.byteswap(inplace=<span class="hljs-literal">True</span>)) <span class="hljs-comment"># 传入True原地交换</span>
print(list(map(hex, a))) 
<span class="hljs-string">'''
大端模式
1：0000 0000 0000 0001 
245：0000 0000 1111 0101  
8755：0010 0010 0011 0011

小端模式
1：0000 0001 0000 0000 
245：(首1补码)1111 0101 0000 0000 (转原码表示)1000 1011 0000 0000  
8755：0011 0011 0010 0010
'''</span>
</div></code></pre>
<h3 id="%E5%89%AF%E6%9C%AC%E5%92%8C%E8%A7%86%E5%9B%BE">副本和视图</h3>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">id是否相同</th>
<th style="text-align:center">修改新数据，原数据是否变化</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">赋值</td>
<td style="text-align:center">相同</td>
<td style="text-align:center">变化</td>
</tr>
<tr>
<td style="text-align:center">view 创建新的数组对象</td>
<td style="text-align:center">不同</td>
<td style="text-align:center">不变</td>
</tr>
<tr>
<td style="text-align:center">切片</td>
<td style="text-align:center">不同</td>
<td style="text-align:center">变化</td>
</tr>
<tr>
<td style="text-align:center">copy副本</td>
<td style="text-align:center">不同</td>
<td style="text-align:center">不变</td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">'''
副本：数据的完整的拷贝。对拷贝修改不影响原数据，物理内存不在一起
视图：数据的别称或引用，通过这个别称或者引用即可访问、操作，不产生拷贝，修改视图影响原数据，物理内存在同一位置

副本发生在：
1.python序列的切片操作，调用deepcopy()函数
2.调用ndarray.copy()

视图发生在：
1.numpy切片操作返回原数据的视图
2.调用ndarray.view()
'''</span>

print(<span class="hljs-string">'-----------------------------------------'</span>)
<span class="hljs-comment"># 赋值不创建副本 id相同，修改赋值对象，也会修改原数据</span>
a = np.arange(<span class="hljs-number">6</span>)
print(a)
print(id(a)) <span class="hljs-comment"># id() 返回对象的“标识值”。该值是一个整数，在此对象的生命周期中保证是唯一且恒定的,类似于指针</span>
b = a
print(b)
print(id(b))
b.shape = <span class="hljs-number">3</span>,<span class="hljs-number">2</span>
print(b)
print(a)

print(<span class="hljs-string">'-----------------------------------------'</span>)
<span class="hljs-comment"># 视图或浅拷贝</span>
<span class="hljs-comment"># view 创建新的数组对象 id不同，修改新的数组对象，不修改原数据</span>
a = np.arange(<span class="hljs-number">6</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
print(a)
b = a.view() <span class="hljs-comment"># view() 创建一个新的数组对象。维度变化并不改变原始数据的维度</span>
print(b)
print(id(a))
print(id(b))
b.shape = <span class="hljs-number">2</span>,<span class="hljs-number">3</span>
print(b) <span class="hljs-comment"># 修改b形状 并不修改a</span>
print(a)

print(<span class="hljs-string">'-----------------------------------------'</span>)
<span class="hljs-comment"># 切片仍是原数据的视图 id不同 视图指向原数据，修改切片原数据也修改</span>
arr = np.arange(<span class="hljs-number">12</span>)
print(a)
a = arr[<span class="hljs-number">3</span>:]
b = arr[<span class="hljs-number">3</span>:]
a[<span class="hljs-number">1</span>] = <span class="hljs-number">123</span>
b[<span class="hljs-number">2</span>] = <span class="hljs-number">234</span>
print(arr) <span class="hljs-comment"># 切片创建视图 修改数据会影响到原始数组</span>
print(id(a), id(b), id(arr[<span class="hljs-number">3</span>:]))
<span class="hljs-comment"># a, b 都是arr的一小部分视图。对视图的修改直接反映到原数据中，但ab的id不同，视图虽然指向原数据，但与赋值引用有区别</span>

print(<span class="hljs-string">'-----------------------------------------'</span>)
<span class="hljs-comment"># 副本或深拷贝 id不同 修改拷贝原数据不修改</span>
a = np.array([[<span class="hljs-number">10</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]])
print(a)
b = a.copy() <span class="hljs-comment"># copy函数创建一个副本，副本修改不影响原始数据，物理内存不在同一位置</span>
print(b)
print(id(a), id(b))
b[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] = <span class="hljs-number">1</span>
print(a)
print(b)
</div></code></pre>
<h3 id="%E7%9F%A9%E9%98%B5%E5%BA%93">矩阵库</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy.matlib
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># numpy包含矩阵库numpy.matlib，模块返回一个矩阵，而非ndarray对象</span>

<span class="hljs-comment"># 转置矩阵</span>
a = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
print(a)
print(a.T)
print(type(a), type(a.T))

<span class="hljs-comment"># matlib.empty 返回一个新的矩阵</span>
a = numpy.matlib.empty((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
print(a)
print(type(a))

<span class="hljs-comment"># matlib.zeros 返回全0矩阵</span>
a = numpy.matlib.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
print(a)

<span class="hljs-comment"># matlib.ones 创建全1矩阵</span>
a = numpy.matlib.ones((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
print(a)

<span class="hljs-comment"># matlib.eye(row, col, k, dtype) 创建对角线为1其他位置为0的矩阵  k:对角线的索引</span>
a = numpy.matlib.eye(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, k=<span class="hljs-number">0</span>, dtype=float)
print(a)
a = numpy.matlib.eye(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, k=<span class="hljs-number">1</span>, dtype=float)
print(a)

<span class="hljs-comment"># matlib.identity() 返回给定大小的单位矩阵</span>
a = numpy.matlib.identity(<span class="hljs-number">3</span>, dtype=float)
print(a)

<span class="hljs-comment"># matlib.rand 随机数矩阵</span>
a = numpy.matlib.rand(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)
print(a)

<span class="hljs-comment"># 矩阵总是二维的，而ndarray是一个n维数组，二者可以互换</span>
a = np.matrix(<span class="hljs-string">'1, 2; 3, 4'</span>)
print(a, type(a))
b = np.asarray(a) <span class="hljs-comment"># asarray：矩阵转ndarray</span>
print(b, type(b))
c = np.asmatrix(b) <span class="hljs-comment"># asmatrix：adarray转矩阵</span>
print(c, type(c))
</div></code></pre>
<h3 id="%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0">线性代数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># numpy提供线性代数函数库linalg</span>
print(<span class="hljs-string">'-----------------dot----------------------'</span>)
<span class="hljs-comment"># dot() 矩阵点积</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
b = np.array([[<span class="hljs-number">11</span>, <span class="hljs-number">12</span>], [<span class="hljs-number">13</span>, <span class="hljs-number">14</span>]])
print(np.dot(a, b))
<span class="hljs-comment"># [[1*11+2*13, 1*12+2*14],[3*11+4*13, 3*12+4*14]]</span>

print(<span class="hljs-string">'-----------------vdot----------------------'</span>)
<span class="hljs-comment"># vdot 向量点积 将输入参数平摊为一维向量</span>
print(np.vdot(a, b))
<span class="hljs-comment"># 1*11 + 2*12 + 3*13 + 4*14 = 130</span>

print(<span class="hljs-string">'-----------------inner----------------------'</span>)
<span class="hljs-comment"># inner 返回一维数组的向量内积 对于更高维度，返回最后一个轴上和的乘积</span>
print(np.inner(np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>])))
<span class="hljs-comment"># 等价于 1*0+2*1+3*0</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
b = np.array([[<span class="hljs-number">11</span>, <span class="hljs-number">12</span>], [<span class="hljs-number">13</span>, <span class="hljs-number">14</span>]])
print(np.inner(a, b))
<span class="hljs-comment"># 1*11+2*12, 1*13+2*14 </span>
<span class="hljs-comment"># 3*11+4*12, 3*13+4*14</span>

print(<span class="hljs-string">'-----------------matmul----------------------'</span>)
<span class="hljs-comment"># matmul 返回两个数组的矩阵乘积 </span>
<span class="hljs-comment"># 二维数组就是矩阵乘法 </span>
a = [[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]]
b = [[<span class="hljs-number">4</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>]]
print(np.matmul(a, b))
<span class="hljs-comment"># 若一个参数的维度为1维度，则通过在其维度加1提升为矩阵，运算后去除</span>
a = [[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]]
b = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]
print(np.matmul(a, b))
print(np.matmul(b, a))
<span class="hljs-comment"># 若任一参数维度大于2，则另一参数进行广播，输出多个矩阵</span>
a = np.arange(<span class="hljs-number">8</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
b = np.arange(<span class="hljs-number">4</span>).reshape(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
print(np.matmul(a, b))

print(<span class="hljs-string">'-----------------linalg.det----------------------'</span>)
<span class="hljs-comment"># linalg.det() 计算输入矩阵的行列式</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
print(np.linalg.det(a))

print(<span class="hljs-string">'-----------------linalg.solve、inv----------------------'</span>)
<span class="hljs-comment"># linalg.solve() 给出矩阵的线性方程解 linalg.inv()计算逆矩阵</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
b = np.linalg.inv(a)
print(a, b)
print(np.dot(a, b)) <span class="hljs-comment"># AB=E</span>

<span class="hljs-comment"># 计算AX=B的解 先求A的逆 X=A^(-1) B</span>
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">-1</span>]])
print(a)
a_inv = np.linalg.inv(a)
print(a_inv)
b = np.array([[<span class="hljs-number">6</span>], [<span class="hljs-number">-4</span>], [<span class="hljs-number">27</span>]])
print(b)
print(<span class="hljs-string">'解方程AX=B'</span>)
print(np.linalg.solve(a, b))
print(<span class="hljs-string">'计算:X = A^(-1) B:'</span>)
print(np.dot(a_inv, b))
</div></code></pre>
<h3 id="io">IO</h3>
<pre class="hljs"><code><div><span class="hljs-string">'''
CSV文件：逗号分隔值文件
np.savetxt(frame, array, fmt='%.18e', delimiter=None)
frame:文件、字符串或产生器 可以是.gz .bz2的压缩文件
array:存入文件的数组
fmt:存入文件的格式 %d %.2f %.18e
delimiter:分割字符串。默认为任何空格
'''</span>
<span class="hljs-comment"># 整数保存</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
a = np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>, <span class="hljs-number">20</span>)
np.savetxt(<span class="hljs-string">'related_data/test1.csv'</span>, a, fmt=<span class="hljs-string">'%d'</span>, delimiter=<span class="hljs-string">','</span>)
<span class="hljs-comment"># 浮点数保存</span>
a = np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>, <span class="hljs-number">20</span>)
np.savetxt(<span class="hljs-string">'related_data/test2.csv'</span>, a, fmt=<span class="hljs-string">'%.1f'</span>, delimiter=<span class="hljs-string">','</span>)

<span class="hljs-string">'''
np.loadtxt(frame, dtype=np.float, delimiter=None, unpack=False)
frame:文件、字符串或产生器 可以是.gz .bz2的压缩文件
dtype:数据类型可选
delimiter:分割字符串。默认为任何空格
unpack:若为True，读入属性将分别写入不同变量
'''</span>
<span class="hljs-comment"># 默认浮点型</span>
b = np.loadtxt(<span class="hljs-string">'related_data/test1.csv'</span>, delimiter=<span class="hljs-string">','</span>)
print(b)
<span class="hljs-comment"># 指定整数型</span>
<span class="hljs-comment"># * 新版numpy无int类型 使用int_</span>
b = np.loadtxt(<span class="hljs-string">'related_data/test1.csv'</span>, dtype=np.int_, delimiter=<span class="hljs-string">','</span>)
print(b)

<span class="hljs-comment"># csv只能有效存储一维和二维数组即load/save函数只能存取一维和二维数组</span>

<span class="hljs-string">'''
a.tofile(frame, sep='', format='%s')
frame: 文件、字符串
sep: 数据分割字符串 如果为空串 写入文件为二进制
format: 写入数据格式
'''</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

a= np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
<span class="hljs-comment"># 只是逐项输出数据 看不出维度信息</span>
a.tofile(<span class="hljs-string">"related_data/test1.dat"</span>, sep=<span class="hljs-string">','</span>, format=<span class="hljs-string">'%d'</span>)
<span class="hljs-comment"># 存储为二进制文件 占用空间更小 如果可以知道显示字符的编码以及字节之间的关系就可以实现转化</span>
a.tofile(<span class="hljs-string">"related_data/test2.dat"</span>, format=<span class="hljs-string">'%d'</span>)

<span class="hljs-string">'''
np.fromfile(frame, dtype=float, count=-1, sep='')
frame:文件、字符串
dtype:读取的数据类型
count:读入元素个数,-1表示读入全部文件
sep: 数据分割字符串 如果为空串 写入文件为二进制

读取时需要知道存入文件时数组的维度和元素类型
可以通过再写一个元数组文件存储维度和元素类型信息
'''</span>
<span class="hljs-comment"># 文本文件</span>
b = np.fromfile(<span class="hljs-string">'related_data/test1.dat'</span>, dtype=np.int_, sep=<span class="hljs-string">','</span>)
print(b)
b = np.fromfile(<span class="hljs-string">'related_data/test1.dat'</span>, dtype=np.int_, sep=<span class="hljs-string">','</span>).reshape(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
print(b)

<span class="hljs-comment"># 二进制文件 无需指定分隔符</span>
c = np.fromfile(<span class="hljs-string">"related_data/test2.dat"</span>, dtype=np.int_).reshape(<span class="hljs-number">5</span>, <span class="hljs-number">10</span> ,<span class="hljs-number">2</span>)
print(c)

<span class="hljs-string">'''
NumPy便捷文件存取 固定文件格式
正常文件：np.save(fname, *args)   数组保存在npy文件
压缩：np.savez(fname, *args, **kwds) 存储多个数组保存在npz扩展文件 

fname: 文件名 以.npy为扩展名 压缩扩展名为.npz
args: 保存的数组 
kwds" 用关键字参数为数组起名，非关键字自动起名arr_0 arr_1

np.load(fname)
fname: 文件名 以.npy为扩展名 压缩扩展名为.npz

可以直接还原数组维度和元素类型信息
因为在文件开头用显示的方式 将数组的源信息存储在了第一行
'''</span>
np.save(<span class="hljs-string">"related_data/test1.npy"</span>, a)
d = np.load(<span class="hljs-string">"related_data/test1.npy"</span>)
a = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])
b = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">0.1</span>)
c = np.sin(b)
np.savez(<span class="hljs-string">'related_data/test.npz'</span>, a, b, sin_array=c)
r = np.load(<span class="hljs-string">'related_data/test.npz'</span>)
print(r.files) <span class="hljs-comment"># 查看数据名称</span>
print(r[<span class="hljs-string">'arr_0'</span>])
print(r[<span class="hljs-string">'arr_1'</span>])
print(r[<span class="hljs-string">'sin_array'</span>])
</div></code></pre>
<h3 id="%E5%9B%BE%E5%83%8F%E7%9A%84%E6%95%B0%E7%BB%84%E8%A1%A8%E7%A4%BA">图像的数组表示</h3>
<p>图像是一个由像素组成的二维矩阵，每个元素是一个RGB值</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

im = np.array(Image.open(<span class="hljs-string">"related_data/dog.jpg"</span>))
<span class="hljs-comment"># 图像是一个三维数组，维度分别是高度、宽度和像素RGB值</span>
print(im.shape, im.dtype)
</div></code></pre>
<h3 id="%E5%9B%BE%E5%83%8F%E7%9A%84%E5%8F%98%E6%8D%A2">图像的变换</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 像素值翻转</span>
a = np.array(Image.open(<span class="hljs-string">"related_data/dog.jpg"</span>))
print(a.shape, a.dtype)
b = [<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>] - a
<span class="hljs-comment"># Image.fromarray 数组转图像Image对象</span>
im = Image.fromarray(b.astype(<span class="hljs-string">'uint8'</span>))
im.save(<span class="hljs-string">"related_data/dog_reverse_trans.jpg"</span>)

<span class="hljs-comment"># .convert('L') 将彩色图片转换灰度值图片 灰度值翻转</span>
a = np.array(Image.open(<span class="hljs-string">"related_data/dog.jpg"</span>).convert(<span class="hljs-string">'L'</span>))
b = <span class="hljs-number">255</span> - a
im = Image.fromarray(b.astype(<span class="hljs-string">'uint8'</span>))
im.save(<span class="hljs-string">'related_data/dog_gray_trans.jpg'</span>)

<span class="hljs-comment"># 区间变换</span>
c = (<span class="hljs-number">100</span>/<span class="hljs-number">255</span>)*a + <span class="hljs-number">150</span>
im = Image.fromarray(c.astype(<span class="hljs-string">'uint8'</span>))
im.save(<span class="hljs-string">'related_data/dog_interval_trans.jpg'</span>)

<span class="hljs-comment"># 像素平方</span>
d = <span class="hljs-number">255</span> * (a/<span class="hljs-number">255</span>) ** <span class="hljs-number">2</span>
im = Image.fromarray(d.astype(<span class="hljs-string">'uint8'</span>))
im.save(<span class="hljs-string">'related_data/dog_square_trans.jpg'</span>)
</div></code></pre>
<h3 id="%E5%AE%9E%E4%BE%8B%E5%9B%BE%E5%83%8F%E7%9A%84%E6%89%8B%E7%BB%98%E6%95%88%E6%9E%9C">实例_图像的手绘效果</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407230152126.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-comment"># 手绘效果：黑白灰色、边界线条较重、相同或相近色彩趋于白色、略有光源效果</span>
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

a = np.array(Image.open(<span class="hljs-string">'related_data/dog.jpg'</span>).convert(<span class="hljs-string">'L'</span>)).astype(<span class="hljs-string">'float'</span>)

<span class="hljs-comment"># 调整图像明暗和添加虚拟深度</span>
depth = <span class="hljs-number">10.</span> <span class="hljs-comment"># 预设深度值为10 取值范围0-100</span>
grad = np.gradient(a)
grad_x, grad_y = grad
grad_x = grad_x * depth / <span class="hljs-number">100.</span> <span class="hljs-comment"># 根据深度调整x和y方向的梯度值 除以100进行归一化</span>
grad_y = grad_y * depth / <span class="hljs-number">100.</span>
A = np.sqrt(grad_x**<span class="hljs-number">2</span> + grad_y**<span class="hljs-number">2</span> + <span class="hljs-number">1.</span>) <span class="hljs-comment"># 构建x和y轴梯度的三维归一化单位坐标系</span>
uni_x = grad_x / A <span class="hljs-comment"># 单位法向量</span>
uni_y = grad_y / A
uni_z = <span class="hljs-number">1.</span> / A

vec_el = np.pi / <span class="hljs-number">2.2</span>  
vec_az = np.pi / <span class="hljs-number">4.</span>
dx = np.cos(vec_el) * np.cos(vec_az) <span class="hljs-comment"># .cos(vec_el)单位光线在平面上的投影长度  dxdydz光源对xyz三方向的影响程度</span>
dy = np.cos(vec_el) * np.sin(vec_az)
dz = np.sin(vec_el)

<span class="hljs-comment"># 梯度和光源相互作用，将梯度转化为灰度</span>
b = <span class="hljs-number">255</span> * (dx * uni_x + dy * uni_y + dz * uni_z)
<span class="hljs-comment"># 避免数据越界 将生成的灰度值裁剪至0-255区间</span>
b: np.ndarray = b.clip(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>)

im = Image.fromarray(b.astype(<span class="hljs-string">'uint8'</span>))
im.save(<span class="hljs-string">'related_data/dog_hand_painting.jpg'</span>)
</div></code></pre>
<h2 id="matplotlib">Matplotlib</h2>
<p><strong>Matplotlib</strong></p>
<ol>
<li>是python的绘图库，使数据图形化，提供多样化的输出格式</li>
<li>可以绘制各种静态、动态、交互式的图表</li>
<li>可以绘制线图、散点图、等高线图、条形图、柱状图、3D图形、甚至是图像动画等</li>
</ol>
<p><strong>基础图表函数</strong>
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407291325680.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407291325218.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407291326615.png" alt=""></p>
<h3 id="pyplot">Pyplot</h3>
<pre class="hljs"><code><div><span class="hljs-string">'''
Pyplot是Matplotlib的子库，提供了和matlab类似的绘图API
是常用的绘图模块，包含一系列绘图函数的相关函数，可以对图形进行修改
'''</span>

<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 利用两点绘制一条线</span>
xpoints = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">6</span>])
ypoints = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>])
plt.plot(xpoints, ypoints)
plt.show()

<span class="hljs-string">'''
plot() 绘制线图和散点图
画单条线 plot([x], y. [fmt], *, data=None, **kwargs)
画多条线 plot([x], y, [fmt], [x2], y2, [fmt2], ..., **kwargs)
x,y: 点或线的节点 x为x轴数据，y为y轴数据，数据可以是列表或数组
fmt: 可选，定义基本格式（颜色、标记和线条样式等）
**kwargs: 可选。用在二维平面图上，设置指定属性，如标签，线的宽度等

标记字符：. 点标记  , 像素标记(极小点)  o 实心圈标记  v 倒三角标记  ^ 上三角标记  &gt; 右三角标记  &lt; 左三角标记等
颜色字符：b m:洋红色 g y r k:黑色 w c '#0080000'RGB颜色符串  多条曲线不指定颜色，会自动选择不同颜色
线型参数：- 实线  -- 破折线  -. 点划线  : 虚线
'''</span>

<span class="hljs-comment"># 绘制(1, 3)到(8, 10)的线</span>
xpoints = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">8</span>])
ypoints = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">10</span>])
plt.plot(xpoints, ypoints)
plt.show()

<span class="hljs-comment"># 绘制两个坐标点，而不是一条线，传参o</span>
xpoints = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">8</span>])
ypoints = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">10</span>])
plt.plot(xpoints, ypoints, <span class="hljs-string">'o'</span>)
plt.show()

<span class="hljs-comment"># 绘制一条不规则线</span>
xpoints = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>])
ypoints = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>])
plt.plot(xpoints, ypoints)
plt.show()

<span class="hljs-comment"># 如果不指定x轴的点。x会根据y的值来设置为0,1,2,3,..N-1</span>
ypoints = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">10</span>])
plt.plot(ypoints)
plt.show()

<span class="hljs-comment"># 若y值更多一点</span>
ypoints = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>])
plt.plot(ypoints)
plt.show()

<span class="hljs-comment"># 正弦余弦图 x,y对应正弦 x,z对应余弦</span>
x = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">4</span> * np.pi, <span class="hljs-number">0.1</span>)
y = np.sin(x)
z = np.cos(x)
plt.plot(x, y, x, z)
plt.show()
</div></code></pre>
<h3 id="%E7%BB%98%E5%9B%BE%E6%A0%87%E8%AE%B0">绘图标记</h3>
<p><strong>坐标标记</strong>
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407272212647.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407272211444.png" alt="">
<strong>线类型标记、颜色标记、标记大小与颜色</strong>
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407272235178.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.markers
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 自定义标记 plot()方法的marker参数</span>
ypoints = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>])
plt.plot(ypoints, marker=<span class="hljs-string">'o'</span>)
plt.show()

<span class="hljs-comment"># marker定义的符号 具体见学习笔记</span>
plt.plot(ypoints, marker=<span class="hljs-string">'*'</span>)
plt.show()

<span class="hljs-comment"># 定义下箭头</span>
plt.plot([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], marker=matplotlib.markers.CARETDOWN)
plt.show()
plt.plot([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], marker=<span class="hljs-number">7</span>) <span class="hljs-comment"># 看表也可以用7</span>
plt.show()

<span class="hljs-comment"># fmt参数 定义了基本格式，如标记、线条样式和颜色</span>
<span class="hljs-comment"># fmt = '[marker][line][color]'</span>
ypoints = np.array([<span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">13</span>, <span class="hljs-number">10</span>])
plt.plot(ypoints, <span class="hljs-string">'o:r'</span>) <span class="hljs-comment"># o实心圆标记 :虚线 r红色</span>
plt.show()

<span class="hljs-comment"># 标记大小与颜色</span>
<span class="hljs-string">'''
markersize:        ms     标记的大小
markerfacecolor:   mfc    定义标记内部的颜色
markeredgecolor:   mec    定义标记边框的颜色
'''</span>
ypoints = np.array([<span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">13</span>, <span class="hljs-number">10</span>])
plt.plot(ypoints, marker=<span class="hljs-string">'o'</span>, ms=<span class="hljs-number">20</span>, mfc=<span class="hljs-string">'w'</span>, mec=<span class="hljs-string">'r'</span>)
plt.show()
plt.plot(ypoints, marker=<span class="hljs-string">'o'</span>, ms=<span class="hljs-number">10</span>, mfc=<span class="hljs-string">'#4CAF50'</span>, mec=<span class="hljs-string">'#4CAF50'</span>) <span class="hljs-comment"># 自定义颜色</span>
plt.show()
</div></code></pre>
<h3 id="%E7%BB%98%E5%9B%BE%E7%BA%BF">绘图线</h3>
<p><strong>线的类型</strong>
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407272253884.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 线的类型</span>
<span class="hljs-comment"># linestyle 简写 ls</span>
ypoints = np.array([<span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">13</span>, <span class="hljs-number">10</span>])
plt.plot(ypoints, linestyle=<span class="hljs-string">'dotted'</span>)
plt.show()
plt.plot(ypoints, ls=<span class="hljs-string">'-.'</span>) <span class="hljs-comment"># 简写</span>
plt.show()

<span class="hljs-comment"># 线的颜色</span>
<span class="hljs-comment"># color 简写 c 同绘图标记颜色</span>
plt.plot(ypoints, color=<span class="hljs-string">'r'</span>)
plt.show()
plt.plot(ypoints, c=<span class="hljs-string">'#8FBC8F'</span>) <span class="hljs-comment"># 简写</span>
plt.show()
plt.plot(ypoints, c=<span class="hljs-string">'SeaGreen'</span>) <span class="hljs-comment"># 十六进制颜色名</span>
plt.show()

<span class="hljs-comment"># 线的宽度</span>
<span class="hljs-comment"># linewidth 简写 lw  值可以是浮点数</span>
plt.plot(ypoints, linewidth=<span class="hljs-string">'12.5'</span>)
plt.show()

<span class="hljs-comment"># 多条线</span>
<span class="hljs-comment"># plot()可以包含多对xy值 绘制多条线</span>
y1 = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>])
y2 = np.array([<span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">13</span>, <span class="hljs-number">10</span>])
plt.plot(y1) <span class="hljs-comment"># 未传入x 默认 0123</span>
plt.plot(y2)
plt.show()
x1 = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
x2 = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]) <span class="hljs-comment"># 自定义坐标</span>
plt.plot(x1, y1, x2, y2)
plt.show()
</div></code></pre>
<h3 id="%E6%96%87%E6%9C%AC%E6%98%BE%E7%A4%BA">文本显示</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.font_manager
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 设置xy轴的标签 xlabel() ylabel()</span>
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>])
plt.plot(x, y)
plt.xlabel(<span class="hljs-string">'x-label'</span>)
plt.ylabel(<span class="hljs-string">'y-label'</span>)
plt.show()

<span class="hljs-comment"># 标签 title()</span>
plt.plot(x, y)
plt.xlabel(<span class="hljs-string">'x-label'</span>)
plt.ylabel(<span class="hljs-string">'y-label'</span>)
plt.title(<span class="hljs-string">'matplotlib test'</span>)
plt.show()

<span class="hljs-comment"># 图形中文显示 fontproperties 可以使用系统的字体 这里使用思源黑体</span>
zhfont1 = matplotlib.font_manager.FontProperties(fname=<span class="hljs-string">'related_data/SourceHanSansCN-Bold.otf'</span>)
x = np.arange(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)
y = <span class="hljs-number">2</span> * x + <span class="hljs-number">5</span>
plt.plot(x, y)
plt.xlabel(<span class="hljs-string">'x轴'</span>, fontproperties=zhfont1)
plt.ylabel(<span class="hljs-string">'y轴'</span>, fontproperties=zhfont1)
plt.title(<span class="hljs-string">'matplotlib 练习'</span>, fontproperties=zhfont1)
plt.show()

<span class="hljs-comment"># 自定义字体样式 fontdict 设置字体颜色大小</span>
zhfont1 = matplotlib.font_manager.FontProperties(fname=<span class="hljs-string">'related_data/SourceHanSansCN-Bold.otf'</span>, size=<span class="hljs-number">18</span>)
font1 = {<span class="hljs-string">'color'</span>:<span class="hljs-string">'blue'</span>, <span class="hljs-string">'size'</span>:<span class="hljs-number">20</span>}
font2 = {<span class="hljs-string">'color'</span>:<span class="hljs-string">'darkred'</span>, <span class="hljs-string">'size'</span>:<span class="hljs-number">20</span>}
plt.title(<span class="hljs-string">'matplotlib 练习'</span>, fontproperties=zhfont1, fontdict=font1)
plt.plot(x, y)
plt.xlabel(<span class="hljs-string">'x轴'</span>, fontproperties=zhfont1)
plt.ylabel(<span class="hljs-string">'y轴'</span>, fontproperties=zhfont1)
plt.show()

<span class="hljs-comment"># 标题与标签的定位</span>
<span class="hljs-string">'''
title() 方法提供loc参数设置标题位置 可以设置为'left','right'和'center',默认center
xlabel()方法提供loc参数设置x 轴位置 可以设置为'left','right'和'center',默认center
ylabel()方法提供loc参数设置y 轴位置 可以设置为'bottom','top'和'center',默认center
'''</span>
plt.title(<span class="hljs-string">'matplotlib 练习'</span>, fontproperties=zhfont1, fontdict=font1, loc=<span class="hljs-string">'right'</span>)
plt.plot(x, y)
plt.xlabel(<span class="hljs-string">'x轴'</span>, fontproperties=zhfont1, loc=<span class="hljs-string">'left'</span>)
plt.ylabel(<span class="hljs-string">'y轴'</span>, fontproperties=zhfont1, loc=<span class="hljs-string">'bottom'</span>)
plt.show()

<span class="hljs-comment"># 任意位置添加文本 text(x, y, str)</span>
a = np.arange(<span class="hljs-number">0.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">0.02</span>)
plt.plot(a, np.cos(<span class="hljs-number">2</span> * np.pi * a), <span class="hljs-string">'r--'</span>)
plt.xlabel(<span class="hljs-string">'横轴：时间'</span>, fontproperties=<span class="hljs-string">'SimHei'</span>, fontsize=<span class="hljs-number">15</span>, color=<span class="hljs-string">'green'</span>)
plt.ylabel(<span class="hljs-string">'纵轴：振幅'</span>, fontproperties=<span class="hljs-string">'SimHei'</span>, fontsize=<span class="hljs-number">15</span>)
plt.title(<span class="hljs-string">r'正弦波实例 $y=cos(2 \pi x)$'</span>, fontproperties=<span class="hljs-string">'SimHei'</span>, fontsize=<span class="hljs-number">25</span>) <span class="hljs-comment"># latex公式</span>
plt.text(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-string">r'$ \mu = 100 $'</span>)
plt.axis([<span class="hljs-number">-1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">-2</span>, <span class="hljs-number">2</span>])
plt.grid(<span class="hljs-literal">True</span>)
plt.show()

<span class="hljs-comment"># 在图形中增加带箭头的注解 annotate(s, xy=arrow_crd, xytext=text_crd, arrowprop=dict) xy:箭头指向位置 xytext:文本位置</span>
a = np.arange(<span class="hljs-number">0.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">0.02</span>)
plt.plot(a, np.cos(<span class="hljs-number">2</span> * np.pi * a), <span class="hljs-string">'r--'</span>)
plt.xlabel(<span class="hljs-string">'横轴：时间'</span>, fontproperties=<span class="hljs-string">'SimHei'</span>, fontsize=<span class="hljs-number">15</span>, color=<span class="hljs-string">'green'</span>)
plt.ylabel(<span class="hljs-string">'纵轴：振幅'</span>, fontproperties=<span class="hljs-string">'SimHei'</span>, fontsize=<span class="hljs-number">15</span>)
plt.title(<span class="hljs-string">r'正弦波实例 $y=cos(2 \pi x)$'</span>, fontproperties=<span class="hljs-string">'SimHei'</span>, fontsize=<span class="hljs-number">25</span>) <span class="hljs-comment"># latex公式</span>
plt.annotate(<span class="hljs-string">r'$\mu = 100$'</span>, xy=(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>), xytext=(<span class="hljs-number">3</span>, <span class="hljs-number">1.5</span>), arrowprops=dict(facecolor=<span class="hljs-string">'black'</span>, shrink=<span class="hljs-number">0.1</span>, width=<span class="hljs-number">2</span>))
plt.axis([<span class="hljs-number">-1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">-2</span>, <span class="hljs-number">2</span>])
plt.grid(<span class="hljs-literal">True</span>)
plt.show()
</div></code></pre>
<h3 id="%E7%BD%91%E6%A0%BC%E7%BA%BF">网格线</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># grid() 设置图表中的网格线</span>
<span class="hljs-string">'''
plt.grid(b=None, which='major', axis='both', )
b: 可选，默认None，可设置bool值，true显示网格线，false不显示，如果设置**kwargs参数，值为true
which: 可选，可选值有'major'(默认),'minor','both' 表示应用更改的网格线
axis: 可选，设置显示哪个方向的网格线，可选'both'(默认) 'x','y'，分别表示x轴y轴两个方向
**kwargs: 可选，设置网格样式，可以是color='r',linestyle='-'和linewidth=2，分别表示网格线的颜色，样式和宽度
'''</span>
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>])
<span class="hljs-comment"># 网格线参数默认值</span>
plt.title(<span class="hljs-string">'grid test'</span>)
plt.xlabel(<span class="hljs-string">'x-label'</span>)
plt.ylabel(<span class="hljs-string">'y-label'</span>)
plt.plot(x, y)
plt.grid()
plt.show()

<span class="hljs-comment"># 网格线参数设置axis</span>
plt.title(<span class="hljs-string">'grid test'</span>)
plt.xlabel(<span class="hljs-string">'x-label'</span>)
plt.ylabel(<span class="hljs-string">'y-label'</span>)
plt.plot(x, y)
plt.grid(axis=<span class="hljs-string">'x'</span>) <span class="hljs-comment"># 设置x轴方向显示网格线</span>
plt.show()

<span class="hljs-comment"># 设置网格线的样式 样式同绘图线类型标记，颜色标记，线宽度</span>
<span class="hljs-comment"># grid(color='color', linestyle='linestyle', linewidth='linewidth')</span>
plt.title(<span class="hljs-string">'grid test'</span>)
plt.xlabel(<span class="hljs-string">'x-label'</span>)
plt.ylabel(<span class="hljs-string">'y-label'</span>)
plt.plot(x, y)
plt.grid(color=<span class="hljs-string">'r'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">0.5</span>) <span class="hljs-comment"># 设置x轴方向显示网格线</span>
plt.show()
</div></code></pre>
<h3 id="%E7%BB%98%E5%88%B6%E5%A4%9A%E5%9B%BE">绘制多图</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># subplot subplots 绘制子图</span>
<span class="hljs-string">'''
subplot() 绘图需要指定位置
subplot(nrows, ncols, index, **kwargs)
subplot(pos, **kwargs)
subplot(**kwargs)
subplot(ax)
将绘图区域分为nrows行和ncols列，从左到右从上到下对每个子区域编号1...N，编号可以通过index来设置
suptitle 设置多图的标题
'''</span> 
<span class="hljs-comment"># 一行二列多图</span>
xpoints = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">6</span>])
ypoints = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>])
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
plt.plot(xpoints, ypoints)
plt.title(<span class="hljs-string">'plot 1'</span>)

x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>])
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
plt.plot(x, y)
plt.title(<span class="hljs-string">'plot 2'</span>)

plt.suptitle(<span class="hljs-string">'subplot test'</span>)
plt.show()

<span class="hljs-comment"># 二行二列多图</span>
xpoints = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">6</span>])
ypoints = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>])
plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
plt.plot(xpoints, ypoints)
plt.title(<span class="hljs-string">'plot 1'</span>)

x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>])
plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
plt.plot(x, y)
plt.title(<span class="hljs-string">'plot 2'</span>)

x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
y = np.array([<span class="hljs-number">5</span>, <span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">8</span>])
plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
plt.plot(x, y)
plt.title(<span class="hljs-string">'plot 3'</span>)

x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
y = np.array([<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">23</span>, <span class="hljs-number">4</span>])
plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>)
plt.plot(x, y)
plt.title(<span class="hljs-string">'plot 4'</span>)

plt.suptitle(<span class="hljs-string">'subplot test'</span>)
plt.show()

<span class="hljs-string">'''
subplots() 绘图一次生成多个，在调用时只需要调用生成对象的ax即可
subplots(nrows=1, ncols=1, *, sharex=False, sharey=False, squeeze=True, 
        subplt_kw=None, gridspec_kw=None, **fig_kw)
nrows, ncols 设置图表的函数和列数
sharex, sharey 设置xy轴是否共享属性，可设置none, all, row, col  当为false或none时每个子图的x轴和y轴是独立的
squeeze: bool 默认True 表示额外的维度从返回的Axes(轴)对象中挤出，对于N*1或1*N个子图，返回一个1维数组，对于N*M，N&gt;1和M&gt;1返回一个二维数组，
        如果设置False，则不进行挤压操作，返回一个元素为的Axes的2维，即使最终是1*1
subplt_kw: 可选，字典 字典关键字传递给add_subplot()创建子图
gridspec_kw: 可选，字典 字典关键字传递给GridSpec构造函数创建子图放在网格里grid
**fig_kw: 把详细的关键字传给figure函数
suptitle 设置多图的标题
'''</span> 
x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>*np.pi, <span class="hljs-number">400</span>)
y = np.sin(x**<span class="hljs-number">2</span>)

<span class="hljs-comment"># 创建一个图像和子图</span>
fig, ax = plt.subplots()
ax.plot(x, y)
ax.set_title(<span class="hljs-string">'simple plot'</span>)

<span class="hljs-comment"># 创建2个子图</span>
f, (ax1, ax2) = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, sharey=<span class="hljs-literal">True</span>)
ax1.plot(x, y)
ax1.set_title(<span class="hljs-string">'sharing y axis'</span>)
ax2.scatter(x, y)

<span class="hljs-comment"># 创建4个子图</span>
fig, axs = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, subplot_kw=dict(projection=<span class="hljs-string">'polar'</span>)) <span class="hljs-comment"># 投影类型：极坐标图 通过subplot_kw传递给add_subplot中的projection参数</span>
axs[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].plot(x, y)
axs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].scatter(x, y)

<span class="hljs-comment"># 共享x轴</span>
plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, sharex=<span class="hljs-string">'col'</span>)

<span class="hljs-comment"># 共享y轴</span>
plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, sharey=<span class="hljs-string">'row'</span>)

<span class="hljs-comment"># 共享x和y轴 两种方法</span>
plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, sharex=<span class="hljs-string">'all'</span>, sharey=<span class="hljs-string">'all'</span>)
plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, sharex=<span class="hljs-literal">True</span>, sharey=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># 创建标识为10的图，已存在的则删除</span>
fig, ax = plt.subplots(num=<span class="hljs-number">10</span>, clear=<span class="hljs-literal">True</span>)
plt.show()

<span class="hljs-string">'''
总结：subplot和subplots的原理
fig = plt.figure()  #首先调用plt.figure()创建了一个**画窗对象fig**
ax = fig.add_subplot(111)  #然后再对fig创建默认的坐标区（一行一列一个坐标区）  笛卡尔坐标系
#这里的（111）相当于（1，1，1），当然，官方有规定，当子区域不超过9个的时候，我们可以这样简写
'''</span>

<span class="hljs-string">'''
plt.subplot2grid(shape, location, colspan=1, rowspan=1)
设定网络 选中网格 确定选中行列区域数量 编号从0开始
shape：把该参数值规定的网格区域作为绘图区域；
location：在给定的位置绘制图形，初始位置 (0,0) 表示第1行第1列；
rowsapan/colspan：这两个参数用来设置让子区跨越几行几列。
'''</span>

<span class="hljs-comment">#使用 colspan指定列，使用rowspan指定行</span>
a1 = plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),colspan = <span class="hljs-number">2</span>)
a2 = plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>), rowspan = <span class="hljs-number">3</span>)
a3 = plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),rowspan = <span class="hljs-number">2</span>, colspan = <span class="hljs-number">2</span>)

x = np.arange(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>)
a2.plot(x, x*x)
a2.set_title(<span class="hljs-string">'square'</span>)
a1.plot(x, np.exp(x))
a1.set_title(<span class="hljs-string">'exp'</span>)
a3.plot(x, np.log(x))
a3.set_title(<span class="hljs-string">'log'</span>)
plt.tight_layout()
plt.show()
</div></code></pre>
<h3 id="%E6%95%A3%E7%82%B9%E5%9B%BE">散点图</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407281340363.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407281341520.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407281341062.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">'''
scatter(x, y, s=None, c=None, marker=None, camap=None, norm=None, vmin=None, vmax=None, alpha=None,
        linewidths=None, *, edgecolors=None, plotnonfinite=False, data=None, **kwargs)
x, y:长度相同的数组。数据点
s:点的大小，默认20，也可以是数组，数组每个参数为对应点的大小
c:点的颜色，默认蓝色，也可以是RGB或RGBA二维行数组
marker:点的样式，默认o
cmap:colormap 默认None，标量或是一个colormap的名字，只有c是一个浮点数数组时才使用，如果没有申明就是image.cmap
norm:归一化 默认None，数据亮度在0-1之间，只有c是一个浮点数数组才使用
vmin,vmax:亮度设置，在norm参数存在时会忽略
alpha:透明度设置，0-1之间，默认None即不透明
linewidth:标记点长度
edgecolors:颜色或颜色序列，可选'face'(默认) 'none' None
plotnonfinite:布尔值，设置是否使用非限定的c(inf,-inf或nan)绘制点
**kwargs:其他参数
'''</span>

x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span> ,<span class="hljs-number">16</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">23</span>, <span class="hljs-number">18</span>])

plt.scatter(x, y)
plt.show()

<span class="hljs-comment"># 设置图标大小</span>
sizes = np.array([<span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">500</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">60</span>, <span class="hljs-number">90</span>])
plt.scatter(x, y, s=sizes)
plt.show()

<span class="hljs-comment"># 自定义点的颜色</span>
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span> ,<span class="hljs-number">16</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">23</span>, <span class="hljs-number">18</span>])
plt.scatter(x, y, color=<span class="hljs-string">'hotpink'</span>)
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>])
y = np.array([<span class="hljs-number">20</span>, <span class="hljs-number">12</span>, <span class="hljs-number">62</span>, <span class="hljs-number">12</span>, <span class="hljs-number">52</span>, <span class="hljs-number">67</span>, <span class="hljs-number">10</span>, <span class="hljs-number">5</span>])
plt.scatter(x, y, color=<span class="hljs-string">'#88C999'</span>)
plt.show()

<span class="hljs-comment"># 随机数设置散点图</span>
np.random.seed(<span class="hljs-number">19680801</span>) <span class="hljs-comment"># 随机数生成器种子</span>
N = <span class="hljs-number">50</span>
x = np.random.rand(N)
y = np.random.rand(N)
colors = np.random.rand(N)
area = (<span class="hljs-number">30</span> * np.random.rand(N)) ** <span class="hljs-number">2</span>
plt.scatter(x, y, s=area, c=colors, alpha=<span class="hljs-number">0.5</span>)
plt.title(<span class="hljs-string">'test'</span>)
plt.show()

<span class="hljs-comment"># 颜色条colormap 像一个颜色列表，每种颜色有一个范围从0到100的值</span>
x = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>])
y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span> ,<span class="hljs-number">16</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">23</span>, <span class="hljs-number">18</span>, <span class="hljs-number">20</span>, <span class="hljs-number">2</span>, <span class="hljs-number">18</span>])
colors = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">60</span>, <span class="hljs-number">70</span>, <span class="hljs-number">80</span>, <span class="hljs-number">90</span>, <span class="hljs-number">100</span>])
plt.scatter(x, y, c=colors, cmap=<span class="hljs-string">'viridis'</span>) <span class="hljs-comment"># cmap参数默认viridis</span>
plt.show()
<span class="hljs-comment"># 要显示颜色条，使用plt.colorbar()方法</span>
plt.scatter(x, y, c=colors, cmap=<span class="hljs-string">'viridis'</span>)
plt.colorbar()
plt.show()
<span class="hljs-comment"># 换个颜色条参数 设置afmhot_r 带r即为颜色条翻转 参数选择见学习笔记</span>
plt.scatter(x, y, c=colors, cmap=<span class="hljs-string">'afmhot'</span>)
plt.colorbar()
plt.show()
plt.scatter(x, y, c=colors, cmap=<span class="hljs-string">'afmhot_r'</span>)
plt.colorbar()
plt.show()
</div></code></pre>
<h3 id="%E6%9F%B1%E5%BD%A2%E5%9B%BE">柱形图</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">'''
bar(x, height, width=0.8, bottom=None, *, align='center', data=None, **kwargs)
x: 浮点型数组，图形x轴数组
height: 浮点型数组，柱形图高度
width: 浮点型数组，柱形图宽度
bottom: 浮点型数组，底座的y坐标，默认0
align: 柱形图与x坐标的对齐方式,'center'以x位置为中心，这是默认值。'edge'将柱形图左边缘与x位置对齐。要对齐右边缘的条形，可以传递负数的宽度值及align='edge'
**kwargs: 其他参数
'''</span>

x = np.array([<span class="hljs-string">'test1'</span>, <span class="hljs-string">'test2'</span>, <span class="hljs-string">'test3'</span>, <span class="hljs-string">'test4'</span>])
y = np.array([<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>])
plt.bar(x, y)
plt.show()

<span class="hljs-comment"># 垂直方向的柱形图可以用barh()方法进行设置</span>
plt.barh(x, y)
plt.show()

<span class="hljs-comment"># 设置柱形图颜色</span>
plt.bar(x, y, color=<span class="hljs-string">'#4CAF50'</span>)
plt.show()

<span class="hljs-comment"># 自定义各个柱形的颜色</span>
plt.bar(x, y, color=[<span class="hljs-string">'#4CAF50'</span>, <span class="hljs-string">'red'</span>, <span class="hljs-string">'hotpink'</span>, <span class="hljs-string">'#556B2F'</span>])
plt.show()

<span class="hljs-comment"># 设置柱形图宽度 bar用width barh用height</span>
plt.subplot(<span class="hljs-number">121</span>)
plt.bar(x, y, width=<span class="hljs-number">0.1</span>)
plt.subplot(<span class="hljs-number">122</span>)
plt.barh(x, y, height=<span class="hljs-number">0.5</span>)
plt.show()
</div></code></pre>
<h3 id="%E9%A5%BC%E5%9B%BE">饼图</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">'''
pie(x, explode=None, labels=None, colors=None, autopct=None, pctdistance=0.6, shadow=False, labelsiatance=1.1, startangle=0,
    radius=1, counterclock=True, wedgeprops=None, center=0, 0, frame=False, totatelabels=False, *, normalize=None, data=None)[source]

x：浮点型数组或列表，用于绘制饼图的数据，表示每个扇形的面积。
explode：数组，表示各个扇形之间的间隔，默认值为0。
labels：列表，各个扇形的标签，默认值为 None。
colors：数组，表示各个扇形的颜色，默认值为 None。
autopct：设置饼图内各个扇形百分比显示格式，%d%% 整数百分比，%0.1f 一位小数， %0.1f%% 一位小数百分比， %0.2f%% 两位小数百分比。
labeldistance：标签标记的绘制位置，相对于半径的比例，默认值为 1.1，如 &lt;1则绘制在饼图内侧。
pctdistance：：类似于 labeldistance，指定 autopct 的位置刻度，默认值为 0.6。
shadow：：布尔值 True 或 False，设置饼图的阴影，默认为 False，不设置阴影。
radius：：设置饼图的半径，默认为 1。
startangle：：用于指定饼图的起始角度，默认为从 x 轴正方向逆时针画起，如设定 =90 则从 y 轴正方向画起。
counterclock：布尔值，用于指定是否逆时针绘制扇形，默认为 True，即逆时针绘制，False 为顺时针。
wedgeprops ：property 字典类型，默认值 None。用于指定扇形的属性，比如边框线颜色、边框线宽度等。例如：wedgeprops={'linewidth':5} 设置 wedge 线宽为5。
textprops ：property 字典类型，用于指定文本标签的属性，比如字体大小、字体颜色等，默认值为 None。
center ：浮点类型的列表，用于指定饼图的中心位置，默认值：(0,0)。
frame ：布尔类型，用于指定是否绘制饼图的边框，默认值：False。如果是 True，绘制带有表的轴框架。
rotatelabels ：布尔类型，用于指定是否旋转文本标签，默认为 False。如果为 True，旋转每个 label 到指定的角度。
data：用于指定数据。如果设置了 data 参数，则可以直接使用数据框中的列作为 x、labels 等参数的值，无需再次传递。

除此之外，pie() 函数还可以返回三个参数：
1. wedges：一个包含扇形对象的列表。
2. texts：一个包含文本标签对象的列表。
3. autotexts：一个包含自动生成的文本标签对象的列表。
'''</span>

y = np.array([<span class="hljs-number">35</span>, <span class="hljs-number">25</span>, <span class="hljs-number">25</span>, <span class="hljs-number">15</span>])
plt.pie(y)
plt.show()

<span class="hljs-comment"># 设置饼图各个扇区的标签和颜色</span>
plt.pie(y, labels=[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>], colors=[<span class="hljs-string">'#D5695D'</span>, <span class="hljs-string">'#5D8CA8'</span>, <span class="hljs-string">'#65A479'</span>, <span class="hljs-string">'#A564C9'</span>])
plt.title(<span class="hljs-string">'pie test'</span>)
plt.show()

<span class="hljs-comment"># 突出显示第二个扇形，并格式化输出百分比</span>
sizes = [<span class="hljs-number">15</span>, <span class="hljs-number">30</span>, <span class="hljs-number">45</span>, <span class="hljs-number">10</span>]
labels = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>]
colors = [<span class="hljs-string">'yellowgreen'</span>, <span class="hljs-string">'gold'</span>, <span class="hljs-string">'lightskyblue'</span>, <span class="hljs-string">'lightcoral'</span>]
explode = (<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-comment"># 突出显示</span>
plt.pie(sizes, explode=explode, labels=labels, colors=colors, autopct=<span class="hljs-string">'%1.1f%%'</span>, shadow=<span class="hljs-literal">True</span>, startangle=<span class="hljs-number">90</span>)
plt.show()

sizes = [<span class="hljs-number">35</span>, <span class="hljs-number">25</span>, <span class="hljs-number">25</span>, <span class="hljs-number">15</span>]
labels = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>]
colors = [<span class="hljs-string">'#D5695D'</span>, <span class="hljs-string">'#5D8CA8'</span>, <span class="hljs-string">'#65A479'</span>, <span class="hljs-string">'#A564C9'</span>]
explode = (<span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-comment"># 突出显示</span>
plt.pie(sizes, explode=explode, labels=labels, colors=colors, autopct=<span class="hljs-string">'%.2f%%'</span>)
plt.show()
</div></code></pre>
<h3 id="%E7%9B%B4%E6%96%B9%E5%9B%BE">直方图</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-string">'''
hist(x, bins=None, range=None, density=False, weights=None, cumulative=False, bottom=None, histtype='bar', align='mid',
    orientation='vertical', rwidth=None, log=False, color=None, stacked=False, **kwargs)

x：表示要绘制直方图的数据，可以是一个一维数组或列表。
bins：可选参数，表示直方图的箱数。默认为10。
range：可选参数，表示直方图的值域范围，可以是一个二元组或列表。默认为None，即使用数据中的最小值和最大值。
density：可选参数，表示是否将直方图归一化。默认为False，即直方图的高度为每个箱子内的样本数，而不是频率或概率密度。
weights：可选参数，表示每个数据点的权重。默认为None。
cumulative：可选参数，表示是否绘制累积分布图。默认为False。
bottom：可选参数，表示直方图的起始高度。默认为None。
histtype：可选参数，表示直方图的类型，可以是'bar'、'barstacked'、'step'、'stepfilled'等。默认为'bar'。
align：可选参数，表示直方图箱子的对齐方式，可以是'left'、'mid'、'right'。默认为'mid'。
orientation：可选参数，表示直方图的方向，可以是'vertical'、'horizontal'。默认为'vertical'。
rwidth：可选参数，表示每个箱子的宽度。默认为None。
log：可选参数，表示是否在y轴上使用对数刻度。默认为False。
color：可选参数，表示直方图的颜色。
label：可选参数，表示直方图的标签。
stacked：可选参数，表示是否堆叠不同的直方图。默认为False。
**kwargs：可选参数，表示其他绘图参数。
'''</span>
data = np.random.randn(<span class="hljs-number">1000</span>)
plt.hist(data, bins=<span class="hljs-number">30</span>, color=<span class="hljs-string">'skyblue'</span>, alpha=<span class="hljs-number">0.8</span>)
plt.title(<span class="hljs-string">'hist test'</span>)
plt.xlabel(<span class="hljs-string">'value'</span>)
plt.ylabel(<span class="hljs-string">'frequency'</span>)
plt.show()

data1 = np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100000</span>) <span class="hljs-comment"># 正态分布随机数组 mu sigma size</span>
data2 = np.random.normal(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100000</span>)
data3 = np.random.normal(<span class="hljs-number">-2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100000</span>)

plt.hist(data1, bins=<span class="hljs-number">30</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">'Data 1'</span>)
plt.hist(data2, bins=<span class="hljs-number">30</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">'Data 2'</span>)
plt.hist(data3, bins=<span class="hljs-number">30</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">'Data 3'</span>)

plt.title(<span class="hljs-string">'hist test'</span>)
plt.xlabel(<span class="hljs-string">'value'</span>)
plt.ylabel(<span class="hljs-string">'frequency'</span>)
plt.legend() <span class="hljs-comment"># 显示图例</span>
plt.show()

<span class="hljs-comment"># * 结合pandas</span>
random_data = np.random.normal(<span class="hljs-number">170</span>, <span class="hljs-number">10</span>, <span class="hljs-number">250</span>)
dataframe = pd.DataFrame(random_data) <span class="hljs-comment"># 数据转换为DataFrame</span>
dataframe.hist() <span class="hljs-comment"># 使用Pandas.hist() 方法绘制直方图</span>
plt.title(<span class="hljs-string">'Pandas hist test'</span>)
plt.xlabel(<span class="hljs-string">'X-value'</span>)
plt.ylabel(<span class="hljs-string">'y-value'</span>)
plt.show()

<span class="hljs-comment"># 使用series对象绘制直方图 将数据框的列替换为series对象即可</span>
data = pd.Series(np.random.normal(size=<span class="hljs-number">100</span>))
plt.hist(data, bins=<span class="hljs-number">10</span>)
plt.title(<span class="hljs-string">'Pandas hist test'</span>)
plt.xlabel(<span class="hljs-string">'X-value'</span>)
plt.ylabel(<span class="hljs-string">'y-value'</span>)
plt.show()
</div></code></pre>
<h3 id="%E6%9E%81%E5%9D%90%E6%A0%87%E5%9B%BE">极坐标图</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

N = <span class="hljs-number">20</span>
theta = np.linspace(<span class="hljs-number">0.0</span>, <span class="hljs-number">2</span> * np.pi, N, endpoint=<span class="hljs-literal">False</span>)
radii = <span class="hljs-number">10</span> * np.random.rand(N)
width = np.pi / <span class="hljs-number">4</span> * np.random.rand(N)

ax = plt.subplot(<span class="hljs-number">111</span>, projection=<span class="hljs-string">'polar'</span>)
bars = ax.bar(theta, radii, width=width, bottom=<span class="hljs-number">0.0</span>)

<span class="hljs-keyword">for</span> r, bar <span class="hljs-keyword">in</span> zip(radii, bars):
    bar.set_facecolor(plt.cm.viridis(r / <span class="hljs-number">10</span>))
    bar.set_alpha(<span class="hljs-number">0.5</span>)

plt.show()

N = <span class="hljs-number">10</span>
theta = np.linspace(<span class="hljs-number">0.0</span>, <span class="hljs-number">2</span> * np.pi, N, endpoint=<span class="hljs-literal">False</span>)
radii = <span class="hljs-number">10</span> * np.random.rand(N)
width = np.pi / <span class="hljs-number">2</span> * np.random.rand(N)

ax = plt.subplot(<span class="hljs-number">111</span>, projection=<span class="hljs-string">'polar'</span>)
bars = ax.bar(theta, radii, width=width, bottom=<span class="hljs-number">0.0</span>)
<span class="hljs-comment"># 这里left对应从哪个角度开始 height对应扇区高度 width对应转过多少角度</span>

<span class="hljs-comment"># 设定颜色</span>
<span class="hljs-keyword">for</span> r, bar <span class="hljs-keyword">in</span> zip(radii, bars):
    bar.set_facecolor(plt.cm.viridis(r / <span class="hljs-number">10</span>))
    bar.set_alpha(<span class="hljs-number">0.5</span>)

plt.show()
</div></code></pre>
<h3 id="imshow">imshow()</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image

<span class="hljs-string">'''
imshow() 用于显示图像，常用于绘制二维的灰度图像或彩色图像，还可用于绘制矩阵、热力图、地图等
imshow(x, cmap=None, norm=None, aspect=None, interpolation=None, alpha=None, vimn-None, vmax=None, origin=None, extent=None,
        shape=None, filternorm=1, filterrad=4.0, imlim=None, resample=None, url=None, *, data=None, **kwargs)

X：输入数据。可以是二维数组、三维数组、PIL图像对象、matplotlib路径对象等。
cmap：颜色映射。用于控制图像中不同数值所对应的颜色。可以选择内置的颜色映射，如gray、hot、jet等，也可以自定义颜色映射。
norm：用于控制数值的归一化方式。可以选择Normalize、LogNorm等归一化方法。
aspect：控制图像纵横比（aspect ratio）。可以设置为auto或一个数字。
interpolation：插值方法。用于控制图像的平滑程度和细节程度。可以选择nearest、bilinear、bicubic等插值方法。
alpha：图像透明度。取值范围为0~1。
origin：坐标轴原点的位置。可以设置为upper或lower。
extent：控制显示的数据范围。可以设置为[xmin, xmax, ymin, ymax]。
vmin、vmax：控制颜色映射的值域范围。
filternorm 和 filterrad：用于图像滤波的对象。可以设置为None、antigrain、freetype等。
imlim： 用于指定图像显示范围。
resample：用于指定图像重采样方式。
url：用于指定图像链接。
'''</span>

<span class="hljs-comment"># 显示灰度图像</span>
img = np.random.rand(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)
plt.imshow(img, cmap=<span class="hljs-string">'gray'</span>)
plt.show()

<span class="hljs-comment"># 显示彩色图像</span>
img = np.random.rand(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3</span>) <span class="hljs-comment"># 生成size=(10,10,3)的均匀分布数组[0,1)</span>
plt.imshow(img)
plt.show()

<span class="hljs-comment"># 显示热力图</span>
data = np.random.rand(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)
plt.imshow(data, cmap=<span class="hljs-string">'hot'</span>)
plt.colorbar() <span class="hljs-comment"># 加颜色条</span>
plt.show()

<span class="hljs-comment"># 显示地图</span>
img = Image.open(<span class="hljs-string">'related_data/map.jpeg'</span>)
data = np.array(img)
plt.imshow(data)
plt.axis(<span class="hljs-string">'off'</span>) <span class="hljs-comment"># 隐藏坐标轴</span>
plt.show()

<span class="hljs-comment"># 显示矩阵</span>
data = np.random.rand(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)
plt.imshow(data)
plt.show()

<span class="hljs-comment"># 三种不同imshow图像展示</span>
n = <span class="hljs-number">4</span>
a = np.reshape(np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n ** <span class="hljs-number">2</span>), (n, n)) <span class="hljs-comment"># 创建n*n的二维数组</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">4.5</span>))

<span class="hljs-comment"># 展示灰度的色彩映射方式 进行没有进行颜色的混合</span>
plt.subplot(<span class="hljs-number">131</span>)
plt.imshow(a, cmap=<span class="hljs-string">'gray'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
plt.xticks(range(n))
plt.yticks(range(n))
plt.title(<span class="hljs-string">'gray color map, no blending'</span>, y=<span class="hljs-number">1.02</span>, fontsize=<span class="hljs-number">12</span>)

<span class="hljs-comment"># 展示使用viridis颜色映射的图像 没有颜色的混合</span>
plt.subplot(<span class="hljs-number">132</span>)
plt.imshow(a, cmap=<span class="hljs-string">'viridis'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
plt.yticks([]) <span class="hljs-comment"># x轴刻度位置的列表，若传入空列表，即不显示x轴</span>
plt.xticks(range(n))
plt.title(<span class="hljs-string">'viridis color map, no blending'</span>, y=<span class="hljs-number">1.02</span>, fontsize=<span class="hljs-number">12</span>)

<span class="hljs-comment"># 展示使用viridis颜色映射的图像 使用双立方插值的方法进行颜色混合</span>
plt.subplot(<span class="hljs-number">133</span>)
plt.imshow(a, cmap=<span class="hljs-string">'viridis'</span>, interpolation=<span class="hljs-string">'bicubic'</span>)
plt.yticks([])
plt.xticks(range(n))
plt.title(<span class="hljs-string">'visidis color map, bicubic blending'</span>, y=<span class="hljs-number">1.02</span>, fontsize=<span class="hljs-number">12</span>)

plt.show()
</div></code></pre>
<h3 id="imsave">imsave()</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">'''
imsave(fname, arr, **kwargs) 将图像数据保存在磁盘上 保存在指定目录 支持PNG JPEG BMP等多种图像格式
kwargs: 可选。用于指定保存的图像格式以及图像质量等参数
'''</span>

img_data = np.random.random((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)) <span class="hljs-comment"># 功能同rand 但random传入一个完整的元组 rand接收分开的参数</span>
plt.imshow(img_data)
plt.imsave(<span class="hljs-string">'related_data/test.png'</span>, img_data)

<span class="hljs-comment"># 创建灰度图像</span>
img_gray = np.random.random((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))
<span class="hljs-comment"># 创建彩色图像</span>
img_color = np.zeros((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>))
img_color[:, :, <span class="hljs-number">0</span>] = np.random.random((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))
img_color[:, :, <span class="hljs-number">1</span>] = np.random.random((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))
img_color[:, :, <span class="hljs-number">2</span>] = np.random.random((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))

plt.imshow(img_gray, cmap=<span class="hljs-string">'gray'</span>)
plt.imsave(<span class="hljs-string">'related_data/test_gray.png'</span>, img_gray, cmap=<span class="hljs-string">'gray'</span>)
plt.imshow(img_color)
plt.imsave(<span class="hljs-string">'related_data/test_color.jpg'</span>, img_color) <span class="hljs-comment"># 若未指定图像格式 默认保存JPEG格式</span>
</div></code></pre>
<h3 id="imread">imread()</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">'''
imread(fname, format=None) 从图像文件中读取图像数据，返回一个np.ndarray对象。形状(nrows, ncols, nchannels) 灰度图像通道数1 彩色图像通道数3或4 红绿蓝还有alpha通道
format: 指定图像文件格式，若不指定，默认根据文件后缀自动识别格式
'''</span>

img = plt.imread(<span class="hljs-string">'related_data/map.jpeg'</span>)
plt.imshow(img)
plt.show()

<span class="hljs-comment"># 更改numpy数组修改图像 这里使图像变暗</span>
img_map = img / <span class="hljs-number">255</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>):
    plt.subplot(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, i)
    x = <span class="hljs-number">1</span> - <span class="hljs-number">0.2</span> *(i - <span class="hljs-number">1</span>)
    plt.axis(<span class="hljs-string">'off'</span>)
    plt.title(<span class="hljs-string">'x={:.1f}'</span>.format(x))
    plt.imshow(img_map * x)
plt.show()
</div></code></pre>
<h3 id="%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA">中文显示</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.font_manager
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 获取系统字体库列表</span>
<span class="hljs-comment"># from matplotlib import pyplot as plt</span>
<span class="hljs-comment"># import matplotlib</span>
<span class="hljs-comment"># a=sorted([f.name for f in matplotlib.font_manager.fontManager.ttflist])</span>

<span class="hljs-comment"># for i in a:</span>
<span class="hljs-comment">#     print(i)</span>


<span class="hljs-comment"># 两种方法</span>
<span class="hljs-comment"># 1.替换Matplotlib默认字体</span>
plt.rcParams[<span class="hljs-string">'font.family'</span>] = <span class="hljs-string">'Source Han Sans CN'</span>
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
y = [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]
plt.plot(x, y)
plt.title(<span class="hljs-string">'折线图实例(替换默认字体)'</span>)
plt.xlabel(<span class="hljs-string">'x轴'</span>)
plt.ylabel(<span class="hljs-string">'y轴'</span>)
plt.show()

<span class="hljs-comment"># 2. 使用OTF字体库</span>
font = matplotlib.font_manager.FontProperties(fname=<span class="hljs-string">'related_data/SourceHanSansCN-Bold.otf'</span>)
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
y = [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]
plt.plot(x, y)
plt.title(<span class="hljs-string">'折线图实例(设置字体属性)'</span>, fontproperties=font)
plt.xlabel(<span class="hljs-string">'x轴'</span>, fontproperties=font)
plt.ylabel(<span class="hljs-string">'y轴'</span>, fontproperties=font)
plt.show()
</div></code></pre>
<h3 id="seaborn%E5%85%A5%E9%97%A8">Seaborn入门</h3>
<pre class="hljs"><code><div><span class="hljs-string">'''
Seaborn 是一个建立在matplotlib基础之上的python数据可视化库
简化统计数据可视化过程，提供高级接口和美观的默认主题
提供高级接口，轻松绘制散点图、折线图、柱状图、热图等
注重美观性，绘图更吸引人
'''</span>
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-string">'''
sns.set_theme() 选择不同的主题和模板

主题theme: 
darkgrid(默认)：深色网格主题
whitegold：浅色网格主题
dark：深色主题 没有网络
white：浅色主题 没有网络
ticks：深色主题 带有刻度标记

模板Context
paper：适用于小图，具有较小的标签和线条
notebook(默认)：适用于笔记本电脑和类型环境，具有中等大小的标签和线条
talk：适用于演讲幻灯片，大尺寸标签和线条
poster： 适用于海报，非常大的标签和线条
'''</span>
sns.set_theme(style=<span class="hljs-string">'whitegrid'</span>, palette=<span class="hljs-string">'pastel'</span>)
products = [<span class="hljs-string">'product A'</span>, <span class="hljs-string">'product B'</span>, <span class="hljs-string">'product C'</span>, <span class="hljs-string">'product D'</span>]
sales = [<span class="hljs-number">120</span>, <span class="hljs-number">210</span>, <span class="hljs-number">150</span>, <span class="hljs-number">180</span>]
sns.barplot(x=products, y=sales) <span class="hljs-comment"># 创建柱状图</span>
plt.xlabel(<span class="hljs-string">'products'</span>)
plt.ylabel(<span class="hljs-string">'sales'</span>)
plt.title(<span class="hljs-string">'product sales by category'</span>)
plt.show()

<span class="hljs-comment"># * 绘图函数</span>
<span class="hljs-comment"># 散点图 sns.scatterplot() 用于绘制两个变量之间的散点图，可选择增加趋势线</span>
data = {<span class="hljs-string">'A'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]}
df = pd.DataFrame(data)
sns.scatterplot(x=<span class="hljs-string">'A'</span>, y=<span class="hljs-string">'B'</span>, data=df)
plt.show()

<span class="hljs-comment"># 折线图 sns.lineplot() 绘制变量随着另一个变量变化的趋势线图</span>
data = {<span class="hljs-string">'X'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], <span class="hljs-string">'Y'</span>:[<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]}
df = pd.DataFrame(data)
sns.lineplot(x=<span class="hljs-string">'X'</span>, y=<span class="hljs-string">'Y'</span>, data=df)
plt.show()

<span class="hljs-comment"># 柱状图 sns.barplot() 绘制变量的均值或其他聚合函数的柱状图</span>
data = {<span class="hljs-string">'Category'</span>:[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>], <span class="hljs-string">'Value'</span>:[<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>]}
df = pd.DataFrame(data)
sns.barplot(x=<span class="hljs-string">'Category'</span>, y=<span class="hljs-string">'Value'</span>, data=df)
plt.show()

<span class="hljs-comment"># 箱线图 sns.boxplot() 绘制变量的分布情况，包括中位数、四分位数等</span>
data = {<span class="hljs-string">'Category'</span>:[<span class="hljs-string">'A'</span>, <span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'C'</span>], <span class="hljs-string">'Value'</span>:[<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>]}
df = pd.DataFrame(data)
sns.boxplot(x=<span class="hljs-string">'Category'</span>, y=<span class="hljs-string">'Value'</span>, data=df)
plt.show()

<span class="hljs-comment"># 热图 sns.heatmap() 绘制矩阵数据的热图，展示相关性矩阵</span>
data = {<span class="hljs-string">'A'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]}
df = pd.DataFrame(data)
correlation_matrix = df.corr() <span class="hljs-comment"># 创建一个相关性矩阵</span>
sns.heatmap(correlation_matrix, annot=<span class="hljs-literal">True</span>, cmap=<span class="hljs-string">'coolwarm'</span>, fmt=<span class="hljs-string">'.2f'</span>)
plt.show()

<span class="hljs-comment"># 小提琴图 sns.violinplot() 显示分布的形状和密度估计，结合了箱线图和核密度估计</span>
data = {<span class="hljs-string">'Category'</span>:[<span class="hljs-string">'A'</span>, <span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'C'</span>], <span class="hljs-string">'Value'</span>:[<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>]}
df = pd.DataFrame(data)
sns.violinplot(x=<span class="hljs-string">'Category'</span>, y=<span class="hljs-string">'Value'</span>, data=df)
plt.show()
</div></code></pre>
<h3 id="%E5%AE%9E%E4%BE%8B%E5%BC%95%E5%8A%9B%E6%B3%A2%E7%9A%84%E7%BB%98%E5%88%B6">实例_引力波的绘制</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> scipy.io <span class="hljs-keyword">import</span> wavfile <span class="hljs-comment"># 读取波形文件的库</span>

rate_h, hstrain = wavfile.read(<span class="hljs-string">r'related_data/H1_Strain.wav'</span>, <span class="hljs-string">'rb'</span>) <span class="hljs-comment"># 读取声音文件</span>
rate_l, lstrain = wavfile.read(<span class="hljs-string">r'related_data/L1_Strain.wav'</span>, <span class="hljs-string">'rb'</span>)
<span class="hljs-comment"># 读取时间序列和信号数据 genfromtxt执行两个循环 第一个循环将文件每一行转化为字符串 第二个循环将每个字符串转换成相应的类型 因为读取出的是一个两行的矩阵 不方便使用 因此使用tranpose转置</span>
reftime, ref_H1 = np.genfromtxt(<span class="hljs-string">'related_data/wf_template.txt'</span>).transpose()

htime_interval = <span class="hljs-number">1</span> / rate_h
ltime_interval = <span class="hljs-number">1</span> / rate_l

htime_len = hstrain.shape[<span class="hljs-number">0</span>] / rate_h
htime = np.arange(-htime_len / <span class="hljs-number">2</span>, htime_len / <span class="hljs-number">2</span>, htime_interval)
ltime_len = lstrain.shape[<span class="hljs-number">0</span>] / rate_l
ltime = np.arange(-ltime_len / <span class="hljs-number">2</span>, ltime_len / <span class="hljs-number">2</span>, ltime_interval)

fig = plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>))

plth = fig.add_subplot(<span class="hljs-number">221</span>)
plth.plot(htime, hstrain, <span class="hljs-string">'y'</span>)
plth.set_xlabel(<span class="hljs-string">'Time(seconds)'</span>)
plth.set_ylabel(<span class="hljs-string">'H1 Strain'</span>)
plth.set_title(<span class="hljs-string">'H1 Strain'</span>)

pltl = fig.add_subplot(<span class="hljs-number">222</span>)
pltl.plot(ltime, lstrain, <span class="hljs-string">'g'</span>)
pltl.set_xlabel(<span class="hljs-string">'Time(seconds)'</span>)
pltl.set_ylabel(<span class="hljs-string">'L1 Strain'</span>)
pltl.set_title(<span class="hljs-string">'L1 Strain'</span>)

plth = fig.add_subplot(<span class="hljs-number">212</span>)
plth.plot(reftime, ref_H1)
plth.set_xlabel(<span class="hljs-string">'Time(seconds)'</span>)
plth.set_ylabel(<span class="hljs-string">'Template Strain'</span>)
plth.set_title(<span class="hljs-string">'Template Strain'</span>)
fig.tight_layout() <span class="hljs-comment"># 自动调整外部边缘</span>

plt.savefig(<span class="hljs-string">'related_data/Gravitational_Waves_Original.png'</span>)
plt.show()
plt.close(fig)
</div></code></pre>
<h2 id="pandas">Pandas</h2>
<p><strong>Pandas</strong></p>
<ol>
<li>是 Python 语言的一个扩展程序库，用于数据分析。</li>
<li>名字衍生自术语 &quot;panel data&quot;（面板数据）和 &quot;Python data analysis&quot;（Python 数据分析）。</li>
<li>是一个开放源码、BSD 许可的库，提供高性能、易于使用的数据结构和数据分析工具。</li>
<li>是一个强大的分析结构化数据的工具集，基础是 Numpy（提供高性能的矩阵运算）。</li>
</ol>
<p><strong>应用场景</strong></p>
<ol>
<li>可以从各种文件格式比如 CSV、JSON、SQL、Microsoft Excel 导入数据。</li>
<li>可以对各种数据进行运算操作，比如归并、再成形、选择，还有数据清洗和数据加工特征。</li>
<li>广泛应用在学术、金融、统计学等各个数据分析领域。</li>
</ol>
<p><strong>数据结构</strong>
Pandas 的主要数据结构是 Series （一维数据）与 DataFrame（二维数据）。</p>
<ol>
<li>Series 是一种类似于一维数组的对象，它由一组数据（各种 Numpy 数据类型）以及一组与之相关的数据标签（即索引）组成。</li>
<li>DataFrame 是一个表格型的数据结构，它含有一组有序的列，每列可以是不同的值类型（数值、字符串、布尔型值）。DataFrame 既有行索引也有列索引，它可以被看做由 Series 组成的字典（共同用一个索引）。</li>
</ol>
<p><strong>特点</strong>
Pandas 可以轻松地处理各种数据结构，尤其是表格型数据，如 SQL 数据库或 Excel 表格。</p>
<ol>
<li>数据结构：Pandas 提供了两种主要的数据结构：Series 和 DataFrame。Series 是一维标记数组，类似于 Python 中的列表或 NumPy 中的数组，而 DataFrame 是一个二维的表格型数据结构，类似于 SQL 表或 Excel 表格。</li>
<li>数据加载与保存：Pandas 可以从各种数据源加载数据，包括 CSV 文件、Excel 表格、SQL 数据库、JSON 文件等，并且可以将处理后的数据保存到这些格式中。</li>
<li>数据清洗与转换：Pandas 提供了丰富的函数和方法，用于数据清洗、处理缺失值、重复值、异常值等，以及进行数据转换、重塑和合并操作。</li>
<li>数据分析与统计：Pandas 提供了各种统计函数和方法，用于描述性统计、聚合操作、分组运算、透视表等数据分析任务。</li>
<li>数据可视化：Pandas 结合了 Matplotlib 库，可以轻松地进行数据可视化，绘制各种统计图表，如折线图、散点图、直方图等。</li>
</ol>
<p>Pandas 是 Python 数据科学领域中不可或缺的工具之一，它的灵活性和强大的功能使得数据处理和分析变得更加简单和高效。</p>
<h3 id="series">Series</h3>
<p>Series类似表格的一个列。类似一维数组，可以保存任何数据类型
Series可以处理各种数据类型，同时保持高效的数据操作能力
特点：</p>
<ol>
<li>一维数组：一维的，只有一个轴，类似列表</li>
<li>索引：每个Series都有一个索引，可以是整数、字符串、日期等类型。如果不指定索引，Pandas 将默认创建一个从 0 开始的整数索引。</li>
<li>数据类型： Series 可以容纳不同数据类型的元素，包括整数、浮点数、字符串、Python 对象等。</li>
<li>大小不变性：Series 的大小在创建后是不变的，但可以通过某些操作（如 append 或 delete）来改变。</li>
<li>操作：Series 支持各种操作，如数学运算、统计分析、字符串处理等。</li>
<li>缺失数据：Series 可以包含缺失数据，Pandas 使用NaN（Not a Number）来表示缺失或无值。</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 创建Series</span>
<span class="hljs-string">'''
pandas.Series(data=None, index=None, dtype=None, name=None, copy=False, fastpath=False)

data：Series 的数据部分，可以是列表、数组、字典、标量值等。如果不提供此参数，则创建一个空的 Series。
index：Series 的索引部分，用于对数据进行标记。可以是列表、数组、索引对象等。如果不提供此参数，则创建一个默认的整数索引。
dtype：指定 Series 的数据类型。可以是 NumPy 的数据类型，例如 np.int64、np.float64 等。如果不提供此参数，则根据数据自动推断数据类型。
name：Series 的名称，用于标识 Series 对象。如果提供了此参数，则创建的 Series 对象将具有指定的名称。
copy：是否复制数据。默认为 False，表示不复制数据。如果设置为 True，则复制输入的数据。
fastpath：是否启用快速路径。默认为 False。启用快速路径可能会在某些情况下提高性能。
'''</span>
a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
myvar = pd.Series(a)
print(myvar) <span class="hljs-comment"># 索引在左 数据在右 数据类型在下</span>
print(myvar[<span class="hljs-number">1</span>]) <span class="hljs-comment"># 指定索引</span>

<span class="hljs-comment"># 指定索引值</span>
a = [<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>]
myvar = pd.Series(a, index=[<span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-string">'z'</span>])
print(myvar[<span class="hljs-string">'y'</span>])

<span class="hljs-comment"># 也可以用key/value对象，类似字典来创建Series</span>
sites = {<span class="hljs-number">1</span>:<span class="hljs-string">'Iven'</span>, <span class="hljs-number">2</span>:<span class="hljs-string">'Rosenn'</span>, <span class="hljs-number">3</span>:<span class="hljs-string">'Starry'</span>}
myvar = pd.Series(sites)
print(myvar)
<span class="hljs-comment"># 可以看出key变成了索引值，可以通过key取出数据</span>
print(myvar[<span class="hljs-number">1</span>])

<span class="hljs-comment"># 如果只需要字典中的一部分数据，只需要指定需要数据的索引即可</span>
myvar = pd.Series(sites, index=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])
print(myvar)

<span class="hljs-comment"># 设置Series名称参数</span>
myvar = pd.Series(sites, index=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], name=<span class="hljs-string">'Iven_Series_test'</span>)
print(myvar)

<span class="hljs-comment"># 使用列表、字典或数组创建一个默认索引的Series</span>
s = pd.Series([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
s = pd.Series(np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]))
s = pd.Series({<span class="hljs-string">'a'</span>:<span class="hljs-number">1</span>, <span class="hljs-string">'b'</span>:<span class="hljs-number">2</span>, <span class="hljs-string">'c'</span>:<span class="hljs-number">3</span>, <span class="hljs-string">'d'</span>:<span class="hljs-number">4</span>})

<span class="hljs-comment"># todo 基本操作</span>
<span class="hljs-comment"># 指定索引创建Series</span>
s = pd.Series([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], index=[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>])

<span class="hljs-comment"># 获取值</span>
value = s[<span class="hljs-number">2</span>] <span class="hljs-comment"># 不良好的书写习惯 尽量使用数据标签获取值</span>
print(value)
print(s[<span class="hljs-string">'a'</span>])

<span class="hljs-comment"># 保留字 in</span>
b = pd.Series([<span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>], [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>])
print(<span class="hljs-string">'c'</span> <span class="hljs-keyword">in</span> b)
print(<span class="hljs-number">0</span> <span class="hljs-keyword">in</span> b)

<span class="hljs-comment"># python .get()方法</span>
<span class="hljs-string">'''
python字典的get方法会返回指定键的值，dict.get(‘键’)，返回“键”对应的“值”，如果键不在字典中则返回默认值None。

dict1={'国家':'中国','首都':'北京'}
print(dict1.get('国家'))
print(dict1.get('首都'))
print(dict1.get('省会'))
输出为：中国 北京 None

如果键不在字典中，想要自己设置返回值，可以这样处理，
例如dict.get('键’,'never')
键在字典中，则返回键对应的值，键不在字典中，则返回never。
'''</span>
print(b.get(<span class="hljs-string">'f'</span>, <span class="hljs-number">100</span>))

<span class="hljs-comment"># 获取多个值</span>
subset = s[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>]
print(subset)

<span class="hljs-comment"># 使用自定义索引</span>
value = s[<span class="hljs-string">'b'</span>]
print(value)

<span class="hljs-comment"># 索引与值对应的关系</span>
<span class="hljs-keyword">for</span> index, value <span class="hljs-keyword">in</span> s.items():
    print(<span class="hljs-string">f'Index: <span class="hljs-subst">{index}</span>, value:<span class="hljs-subst">{value}</span>'</span>)

<span class="hljs-comment"># 使用切片语法来访问Series的一部分</span>
print(s[<span class="hljs-string">'a'</span>:<span class="hljs-string">'c'</span>])
print(s[:<span class="hljs-number">3</span>])

<span class="hljs-comment"># 为特定的索引标签赋值</span>
s[<span class="hljs-string">'a'</span>] = <span class="hljs-number">10</span>

<span class="hljs-comment"># 通过赋值给新的索引标签来添加元素</span>
s[<span class="hljs-string">'e'</span>] = <span class="hljs-number">5</span>

<span class="hljs-comment"># 使用 del 删除指定索引标签的元素</span>
<span class="hljs-keyword">del</span> s[<span class="hljs-string">'a'</span>]

<span class="hljs-comment"># 使用 drop 方法删除一个或多个索引标签，返回一个新的Series</span>
s_dropped = s.drop([<span class="hljs-string">'b'</span>])
print(s_dropped)

<span class="hljs-comment"># todo 基本运算</span>
<span class="hljs-comment"># 算术运算</span>
result = s_dropped * <span class="hljs-number">2</span> <span class="hljs-comment"># 所有元素乘2</span>
print(result)

<span class="hljs-comment"># 过滤</span>
filtered_series = s_dropped[s_dropped &gt; <span class="hljs-number">3</span>]
print(filtered_series)

<span class="hljs-comment"># 数学函数</span>
result = np.sqrt(s_dropped)
print(result)

<span class="hljs-comment"># todo 对齐操作 series + series</span>
a = pd.Series([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>])
b = pd.Series([<span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>], [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>])
print(a + b)

<span class="hljs-comment"># todo 计算统计数据 使用Series的方法来计算描述性统计</span>
print(s_dropped.sum()) <span class="hljs-comment"># 计算Series的总和</span>
print(s_dropped.mean()) <span class="hljs-comment"># 平均值</span>
print(s_dropped.max()) <span class="hljs-comment"># 最大值</span>
print(s_dropped.min()) <span class="hljs-comment"># 最小值</span>
print(s_dropped.std()) <span class="hljs-comment"># 标准差</span>

<span class="hljs-comment"># todo 属性和方法</span>
<span class="hljs-comment"># 获取索引</span>
index = s.index
print(index)

<span class="hljs-comment"># 获取值数组</span>
values = s.values
print(values)

<span class="hljs-comment"># 获取描述统计信息</span>
stats = s.describe()
print(stats)

<span class="hljs-comment"># 获取最大值最小值索引</span>
max_index = s.idxmax()
print(max_index)
min_index = s.idxmin()
print(min_index)

<span class="hljs-comment"># name 属性 series对象和索引都可以有一个名字，存放在属性name中</span>
b = pd.Series([<span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>], [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>])
b.name = <span class="hljs-string">'Series对象'</span>
b.index.name = <span class="hljs-string">'索引列'</span>
print(b)

<span class="hljs-comment"># 其他属性和方法</span>
print(s.dtype) <span class="hljs-comment"># 数据类型</span>
print(s.shape) <span class="hljs-comment"># 形状</span>
print(s.size)  <span class="hljs-comment"># 元素个数</span>
print(s.head())<span class="hljs-comment"># 前几个元素，默认前五个</span>
print(s.tail())<span class="hljs-comment"># 后几个元素，默认后五个</span>
print(s.sum()) <span class="hljs-comment"># 求和</span>
print(s.mean())<span class="hljs-comment"># 平均值</span>
print(s.max()) <span class="hljs-comment"># 最大值</span>
print(s.min()) <span class="hljs-comment"># 最小值</span>
print(s.std()) <span class="hljs-comment"># 标准差</span>

<span class="hljs-comment"># 布尔表达式 根据条件过滤Series</span>
print(s &gt; <span class="hljs-number">3</span>)

<span class="hljs-comment"># 转换数据类型 astype 将Series转换为另一种数据类型</span>
s_astype = s.astype(<span class="hljs-string">'float64'</span>)
print(s.dtype)
print(s_astype.dtype)
</div></code></pre>
<h3 id="dataframe">DataFrame</h3>
<p><strong>DataFrame</strong></p>
<ol>
<li>是 Pandas 中的另一个核心数据结构，用于表示二维表格型数据。</li>
<li>是一个表格型的数据结构，它含有一组有序的列，每列可以是不同的值类型（数值、字符串、布尔型值）。</li>
<li>既有行索引也有列索引，它可以被看做由 Series 组成的字典（共同用一个索引）。</li>
<li>提供了各种功能来进行数据访问、筛选、分割、合并、重塑、聚合以及转换等操作。</li>
</ol>
<p><strong>特点</strong></p>
<ol>
<li>二维结构： DataFrame 是一个二维表格，可以被看作是一个 Excel 电子表格或 SQL 表，具有行和列。可以将其视为多个 Series 对象组成的字典。</li>
<li>列的数据类型： 不同的列可以包含不同的数据类型，例如整数、浮点数、字符串或 Python 对象等。</li>
<li>索引：DataFrame 可以拥有行索引和列索引，类似于 Excel 中的行号和列标。</li>
<li>大小可变：可以添加和删除列，类似于 Python 中的字典。</li>
<li>自动对齐：在进行算术运算或数据对齐操作时，DataFrame 会自动对齐索引。</li>
<li>处理缺失数据：DataFrame 可以包含缺失数据，Pandas 使用 NaN（Not a Number）来表示。</li>
<li>数据操作：支持数据切片、索引、子集分割等操作。</li>
<li>时间序列支持：DataFrame 对时间序列数据有特别的支持，可以轻松地进行时间数据的切片、索引和操作。</li>
<li>丰富的数据访问功能：通过 .loc、.iloc 和 .query() 方法，可以灵活地访问和筛选数据。</li>
<li>灵活的数据处理功能：包括数据合并、重塑、透视、分组和聚合等。</li>
<li>数据可视化：虽然 DataFrame 本身不是可视化工具，但它可以与 Matplotlib 或 Seaborn 等可视化库结合使用，进行数据可视化。</li>
<li>高效的数据输入输出：可以方便地读取和写入数据，支持多种格式，如 CSV、Excel、SQL 数据库和 HDF5 格式。</li>
<li>描述性统计：提供了一系列方法来计算描述性统计数据，如 .describe()、.mean()、.sum() 等。</li>
<li>灵活的数据对齐和集成：可以轻松地与其他 DataFrame 或 Series 对象进行合并、连接或更新操作。</li>
<li>转换功能：可以对数据集中的值进行转换，例如使用 .apply() 方法应用自定义函数。</li>
<li>滚动窗口和时间序列分析：支持对数据集进行滚动窗口统计和时间序列分析。</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># todo 创建DataFrame</span>
<span class="hljs-string">'''
pandas.DataFrame(data=None, index=None, columns=None, dtype=None, copy=None)

data：DataFrame 的数据部分，可以是字典、二维数组、Series、DataFrame 或其他可转换为 DataFrame 的对象。如果不提供此参数，则创建一个空的 DataFrame。
index：DataFrame 的行索引，用于标识每行数据。可以是列表、数组、索引对象等。如果不提供此参数，则创建一个默认的整数索引。
columns：DataFrame 的列索引，用于标识每列数据。可以是列表、数组、索引对象等。如果不提供此参数，则创建一个默认的整数索引。
dtype：指定 DataFrame 的数据类型。可以是 NumPy 的数据类型，例如 np.int64、np.float64 等。如果不提供此参数，则根据数据自动推断数据类型。
copy：是否复制数据。默认为 False，表示不复制数据。如果设置为 True，则复制输入的数据。
'''</span>

<span class="hljs-comment"># 使用列表创建</span>
data = [[<span class="hljs-string">'Iven'</span>, <span class="hljs-number">21</span>], [<span class="hljs-string">'Rosenn'</span>, <span class="hljs-number">25</span>], [<span class="hljs-string">'Starry'</span>, <span class="hljs-number">19</span>]]
df = pd.DataFrame(data, columns=[<span class="hljs-string">'Name'</span>, <span class="hljs-string">'Age'</span>])
df[<span class="hljs-string">'Name'</span>] = df[<span class="hljs-string">'Name'</span>].astype(str) <span class="hljs-comment"># astype方法设置每列的数据类型</span>
df[<span class="hljs-string">'Age'</span>] = df[<span class="hljs-string">'Age'</span>].astype(float)
print(df)

<span class="hljs-comment"># 使用字典创建</span>
data = {<span class="hljs-string">'Name'</span>:[<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>], <span class="hljs-string">'Age'</span>:[<span class="hljs-number">21</span>, <span class="hljs-number">25</span>, <span class="hljs-number">19</span>]}
df = pd.DataFrame(data)
print(df)

<span class="hljs-comment"># 使用ndarray对象创建 长度必须相同，若传递了index，索引长度要等于数组长度，若未传递索引，默认是range(n),n是数组长度</span>
ndarray_data = np.array([[<span class="hljs-string">'Iven'</span>, <span class="hljs-number">21</span>], [<span class="hljs-string">'Rosenn'</span>, <span class="hljs-number">25</span>], [<span class="hljs-string">'Starry'</span>, <span class="hljs-number">19</span>]])
df = pd.DataFrame(ndarray_data, columns=[<span class="hljs-string">'Name'</span>, <span class="hljs-string">'Age'</span>])
print(df)

<span class="hljs-comment"># 使用字典创建 key为列名</span>
data = [{<span class="hljs-string">'a'</span>:<span class="hljs-number">1</span>, <span class="hljs-string">'b'</span>:<span class="hljs-number">2</span>}, {<span class="hljs-string">'a'</span>:<span class="hljs-number">5</span>, <span class="hljs-string">'b'</span>:<span class="hljs-number">10</span>, <span class="hljs-string">'c'</span>:<span class="hljs-number">20</span>}]
df = pd.DataFrame(data)
print(df) <span class="hljs-comment"># 没有相对应的数据为NAN</span>

<span class="hljs-comment"># 使用Series创建</span>
s1 = pd.Series([<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>])
s2 = pd.Series([<span class="hljs-number">21</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>])
s3 = pd.Series([<span class="hljs-string">'Chengdu'</span>, <span class="hljs-string">'Hangzhou'</span>, <span class="hljs-string">'Xi\'an'</span>])
df = pd.DataFrame({<span class="hljs-string">'Name'</span>:s1, <span class="hljs-string">'Age'</span>:s2, <span class="hljs-string">'City'</span>:s3})
print(df)

<span class="hljs-comment"># todo 访问DataFrame元素</span>
<span class="hljs-comment"># 访问行 loc 返回指定行的数据，若没有设置索引，第一行索引为0，第二行为1</span>
data = {<span class="hljs-string">'calories'</span>: [<span class="hljs-number">420</span>, <span class="hljs-number">280</span>, <span class="hljs-number">400</span>], <span class="hljs-string">'duration'</span>:[<span class="hljs-number">50</span>, <span class="hljs-number">45</span>, <span class="hljs-number">40</span>]}
df = pd.DataFrame(data)
print(df.loc[<span class="hljs-number">0</span>])
print(df.loc[<span class="hljs-number">1</span>]) <span class="hljs-comment"># 返回结果是一个Series数据</span>
print(df.loc[[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]]) <span class="hljs-comment"># 返回一个dataframe数据</span>

<span class="hljs-comment"># 访问列 loc[] iloc[]</span>
data = {<span class="hljs-string">'calories'</span>: [<span class="hljs-number">420</span>, <span class="hljs-number">280</span>, <span class="hljs-number">400</span>], <span class="hljs-string">'duration'</span>:[<span class="hljs-number">50</span>, <span class="hljs-number">45</span>, <span class="hljs-number">40</span>]}
df = pd.DataFrame(data, index=[<span class="hljs-string">'day1'</span>, <span class="hljs-string">'day2'</span>, <span class="hljs-string">'day3'</span>]) <span class="hljs-comment"># 指定索引值</span>
print(df)
print(df.loc[<span class="hljs-string">'day2'</span>]) <span class="hljs-comment"># df.loc[row_label, column_label] 索引名 day1 day2</span>
print(df.iloc[:, <span class="hljs-number">0</span>])  <span class="hljs-comment"># df.iloc[row_index, column_index] 整数 0, 1, ...</span>

<span class="hljs-comment"># 访问单个元素 [列][行] 先得到一列Series 在得到Series中的一个数据</span>
print(df[<span class="hljs-string">'calories'</span>][<span class="hljs-number">0</span>]) 

<span class="hljs-comment"># todo DataFrame 属性和方法</span>
print(df.shape)      <span class="hljs-comment"># 形状</span>
print(df.columns)    <span class="hljs-comment"># 列名</span>
print(df.index)      <span class="hljs-comment"># 索引</span>
print(df.head())     <span class="hljs-comment"># 前几行数据，默认前五行</span>
print(df.tail())     <span class="hljs-comment"># 后几行数据，默认后五行</span>
print(df.info())     <span class="hljs-comment"># 数据信息</span>
print(df.describe()) <span class="hljs-comment"># 描述统计信息</span>
print(df.mean())     <span class="hljs-comment"># 求平均值</span>
print(df.sum())      <span class="hljs-comment"># 求和</span>
print(df.max())      <span class="hljs-comment"># 最大值</span>
print(df.min())      <span class="hljs-comment"># 最小值</span>

<span class="hljs-comment"># todo 修改DataFrame</span>
<span class="hljs-comment"># 修改列数据</span>
df[<span class="hljs-string">'calories'</span>] = [<span class="hljs-number">200</span>, <span class="hljs-number">300</span>, <span class="hljs-number">400</span>]
<span class="hljs-comment"># 修改行数据</span>
df.loc[<span class="hljs-string">'day1'</span>] = [<span class="hljs-number">100</span>, <span class="hljs-number">90</span>]
<span class="hljs-comment"># 添加新列</span>
df[<span class="hljs-string">'food'</span>] = [<span class="hljs-string">'rice'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'apple'</span>]
<span class="hljs-comment"># 添加新行 loc 指定特定索引添加新行 concat 合并两个或多个DataFrame  append(已被弃用)</span>
df.loc[<span class="hljs-string">'day4'</span>] = [<span class="hljs-number">500</span>, <span class="hljs-number">60</span>, <span class="hljs-string">'bread'</span>]
new_row = pd.DataFrame([[<span class="hljs-number">600</span>, <span class="hljs-number">70</span>, <span class="hljs-string">'cococola'</span>]], index=[<span class="hljs-string">'day5'</span>], columns=[<span class="hljs-string">'calories'</span>, <span class="hljs-string">'duration'</span>, <span class="hljs-string">'food'</span>])
df = pd.concat([df, new_row], ignore_index=<span class="hljs-literal">False</span>)
print(df)
<span class="hljs-comment"># // new_row = {'calories':600, 'duration':70, 'food':'cococola'}</span>
<span class="hljs-comment"># // df = df.append(new_row, ignore_index=True)</span>
<span class="hljs-comment"># 删除列 drop</span>
df = df.drop(<span class="hljs-string">'duration'</span>, axis=<span class="hljs-number">1</span>)  <span class="hljs-comment"># 删除轴1的duration，即列名为duration的列</span>
print(df)
<span class="hljs-comment"># 删除行 drop</span>
df_drop = df.drop(<span class="hljs-string">'day1'</span>) <span class="hljs-comment"># 默认删除轴0的day1，即行名为day1的行</span>
print(df_drop)

<span class="hljs-comment"># todo 索引操作</span>
<span class="hljs-comment"># 重置索引 reset_index</span>
df_reset = df.reset_index(drop=<span class="hljs-literal">True</span>)
print(df_reset)
<span class="hljs-comment"># 设置索引 set_index 将一列设置为索引 drop是否保留被转换的列</span>
df_set = df.set_index([<span class="hljs-string">'calories'</span>], drop=<span class="hljs-literal">True</span>)
print(df_set)
<span class="hljs-comment"># 布尔索引</span>
print(df[df[<span class="hljs-string">'calories'</span>] &gt; <span class="hljs-number">400</span>])
<span class="hljs-string">'''
append(idx)         连接另一个index对象，产生新的index对象
diff(idx)           计算差集，产生新的index对象
intersection(idx)   计算交集
union(idx)          计算并集
delete(loc)         删除loc位置的元素
insert(loc,e)       在loc位置添加一个元素e  
'''</span>
df_del = df.columns.delete(<span class="hljs-number">1</span>)
print(df_del)
df_ins = df.index.insert(<span class="hljs-number">1</span>, <span class="hljs-string">'day6'</span>)
print(df_ins)
print(df)
df_rei = df.reindex(index=df_ins, columns=df_del)
print(df_rei)
df_rei = df.reindex(index=df_ins, columns=df_del, method=<span class="hljs-string">'bfill'</span>)
print(df_rei)
df_rei = df.reindex(index=df_ins, columns=df_del, method=<span class="hljs-string">'ffill'</span>)
print(df_rei)

<span class="hljs-comment"># 重排索引 </span>
<span class="hljs-string">'''
reindex(index=None, columns=None, ...) 重拍已有的序列

index,columns 新的行列自定义索引
fill_value    重新索引中，用于填充缺失位置的值
method        填充方法，ffill 会将上一个非 NaN 的值填充到此位置  bfill会将下一个非 NaN 的值填充到此位置 
                跟行列插入的位置无关(1,)(不是找索引0 索引1的数值)  跟索引值名称有关(找day6前一个索引day5数值和后一个索引NAN)
limit         最大填充量
copy          True生成新对象
'''</span>
df_reindex = df.reindex(index = [<span class="hljs-string">'day1'</span>, <span class="hljs-string">'day3'</span>, <span class="hljs-string">'day2'</span>, <span class="hljs-string">'day5'</span>, <span class="hljs-string">'day4'</span>], columns=[<span class="hljs-string">'food'</span>, <span class="hljs-string">'calories'</span>])
print(df)
print(df_reindex)
new_df_insert = df_reindex.columns.insert(<span class="hljs-number">2</span>, <span class="hljs-string">'新增'</span>) <span class="hljs-comment"># insert 在列的指定位置加新列后的所有列名</span>
print(new_df_insert)
new_df = df_reindex.reindex(columns=new_df_insert, fill_value=<span class="hljs-number">200</span>)
print(new_df)

<span class="hljs-comment"># todo 数据类型</span>
<span class="hljs-comment"># 查看数据类型 dtypes</span>
print(df.dtypes)
<span class="hljs-comment"># 转换数据类型 astype</span>
df[<span class="hljs-string">'calories'</span>] = df[<span class="hljs-string">'calories'</span>].astype(<span class="hljs-string">'float32'</span>)
print(df)

<span class="hljs-comment"># todo 合并与分割</span>
<span class="hljs-comment"># concat</span>
<span class="hljs-string">'''
pd.concat([df1, df2], ignore_index=True, join='outer',axis=1)

axis：0轴（默认）按行拼接（增加行）, 1轴，按列拼接（增加列）；
join：outer默认（拼接时取并集）；inner（拼接时取交集）
ignore_index：默认False，即不重置dataframe的索引；True重置索引，从0开始

'''</span>
new_row = pd.DataFrame([[<span class="hljs-number">700</span>, <span class="hljs-string">'fenta'</span>]], index=[<span class="hljs-string">'day6'</span>], columns=[<span class="hljs-string">'calories'</span>, <span class="hljs-string">'food'</span>])
df_row_concat = pd.concat([df, new_row])
print(df_row_concat)
new_col = pd.DataFrame({<span class="hljs-string">'name'</span>:[<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>, <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Alen'</span>]}, index=[<span class="hljs-string">'day1'</span>, <span class="hljs-string">'day2'</span>, <span class="hljs-string">'day3'</span>, <span class="hljs-string">'day4'</span>, <span class="hljs-string">'day5'</span>])
df_col_concat = pd.concat([df, new_col], axis=<span class="hljs-number">1</span>)
print(df_col_concat)

<span class="hljs-comment"># merge</span>
<span class="hljs-string">'''
pd.merge(df1,df2,on='列名',how='outer')   
how：合并方式：how = 'inner'（默认）类似于取交集  'outer'，类似于取并集 left以左表为主表 right以右表为主表
on： 用于连接的列名，若不指定则以两个Dataframe的列名的交集作为连接键
'''</span>
new_col = pd.DataFrame({<span class="hljs-string">'food'</span>:[<span class="hljs-string">'rice'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-string">'bread'</span>, <span class="hljs-string">'cococola'</span>],  <span class="hljs-string">'name'</span>:[<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>, <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Alen'</span>]})
df_col_merge = pd.merge(df, new_col, how=<span class="hljs-string">'outer'</span>)
print(df_col_merge)
new_row = pd.DataFrame({<span class="hljs-string">'calories'</span>:<span class="hljs-number">900</span>, <span class="hljs-string">'food'</span>:<span class="hljs-string">'orange'</span>},index=[<span class="hljs-string">'day6'</span>])
df_row_merge = pd.merge(df, new_row, how=<span class="hljs-string">'outer'</span>)
print(df_row_merge)


<span class="hljs-comment"># todo 算术运算</span>
<span class="hljs-comment"># 根据行列索引，补齐后运算，默认产生浮点数，补齐时填充NAN。二维和一维、一维和零维间为广播运算，+ - * / 运算产生新对象</span>
a = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>))
print(a)
print(b)
print(a + b)
print(a * b)
<span class="hljs-string">'''
add(d, **argws)  类型间加法运算
sub(d, **argws)  类型间减法运算
mul(d, **argws)  类型间乘法运算
div(d, **argws)  类型间除法运算
'''</span>
print(b.add(a, fill_value=<span class="hljs-number">8888</span>)) <span class="hljs-comment"># 哪空替代哪 在运算</span>
print(a.mul(b, fill_value=<span class="hljs-number">1</span>))

<span class="hljs-comment"># 不同维度间为广播运算，一维Series默认在轴1运算</span>
a = pd.Series(np.arange(<span class="hljs-number">4</span>))
b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>))
print(a - <span class="hljs-number">10</span>)
print(b - a) <span class="hljs-comment"># b每行减去a的转置</span>
print(b.sub(a, axis=<span class="hljs-number">0</span>)) <span class="hljs-comment"># 使用运算方法可以让一维Series在轴0运算</span>

<span class="hljs-comment"># todo 比较运算法则</span>
<span class="hljs-comment"># 只能比较相同索引的元素，不可以补齐，二维和一维、一维和零维间为广播运算，&gt; &lt; &gt;= &lt;= == !=运算产生布尔对象</span>
a = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
b = pd.DataFrame(np.arange(<span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
print(a)
print(b)
print(a &gt; b)
print(a == b)

<span class="hljs-comment"># 不同维度广播</span>
a = pd.Series(np.arange(<span class="hljs-number">4</span>))
b = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
print(a)
print(b)
print(a &gt; b)
print(b &gt; <span class="hljs-number">0</span>)
</div></code></pre>
<h3 id="csv">CSV</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-string">'''
CSV comma separated values 逗号分隔值 以纯文本形式存储表格数据
是一种通用的、箱底简单的文件格式
pandas可以处理CSV文件
'''</span>

<span class="hljs-comment"># 读取CSV文件 read_csv</span>
df = pd.read_csv(<span class="hljs-string">'related_data/nba.csv'</span>)
print(df.to_string()) <span class="hljs-comment"># to_string可以返回dataframe类型的数据，若不使用，数据只显示前五行和后五行，中间用...代替</span>
print(df)

<span class="hljs-comment"># 存储CSV文件 to_csv</span>
name = [<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>]
age = [<span class="hljs-number">19</span>, <span class="hljs-number">20</span>, <span class="hljs-number">21</span>]
hobby = [<span class="hljs-string">'food'</span>, <span class="hljs-string">'coding'</span>, <span class="hljs-string">'travel'</span>]
dict = {<span class="hljs-string">'name'</span>:name, <span class="hljs-string">'age'</span>:age, <span class="hljs-string">'hobby'</span>:hobby}
df = pd.DataFrame(dict)
df.to_csv(<span class="hljs-string">'related_data/savetest.csv'</span>)

<span class="hljs-comment"># 数据处理 </span>
df = pd.read_csv(<span class="hljs-string">'related_data/nba.csv'</span>)
<span class="hljs-comment"># head(n) 读取前面n行，默认5行</span>
print(df.head(<span class="hljs-number">3</span>))
<span class="hljs-comment"># tail(n) 读取尾部n行，默认5行</span>
print(df.tail(<span class="hljs-number">3</span>))
<span class="hljs-comment"># info() 返回表格的一些基本信息</span>
print(df.info())
</div></code></pre>
<h3 id="json">JSON</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> glom <span class="hljs-keyword">import</span> glom

<span class="hljs-string">'''
JSON Java Script Objection Notation  Java Script对象表示法，是存储和交换文本信息的语法，类似XML
JSON比XML更小、更快、更易解析
pandas可以处理JSON数据
'''</span>

<span class="hljs-comment"># 读取JSON文件 read_json</span>
df = pd.read_json(<span class="hljs-string">'related_data/test.json'</span>)
print(df.to_string())

<span class="hljs-comment"># 也可以直接处理JSON字符串</span>
data = [
    {
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"1"</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"Iven"</span>,
        <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>
    },
    {
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"2"</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"Rosenn"</span>,
        <span class="hljs-string">"age"</span>: <span class="hljs-number">21</span>
    },
    {
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"3"</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bob"</span>,
        <span class="hljs-string">"age"</span>: <span class="hljs-number">22</span>
    }
]
df = pd.DataFrame(data)
print(df)

<span class="hljs-comment"># 字典转DataFrame JSON对象与字典具有相同的格式</span>
s = {
    <span class="hljs-string">'col1'</span>:{<span class="hljs-string">'row1'</span>:<span class="hljs-number">1</span>, <span class="hljs-string">'row2'</span>:<span class="hljs-number">2</span>, <span class="hljs-string">'row3'</span>:<span class="hljs-number">3</span>},
    <span class="hljs-string">'col2'</span>:{<span class="hljs-string">'row4'</span>:<span class="hljs-number">4</span>, <span class="hljs-string">'row5'</span>:<span class="hljs-number">5</span>, <span class="hljs-string">'row6'</span>:<span class="hljs-number">6</span>},
}
df = pd.DataFrame(s) <span class="hljs-comment"># 读取JSON文件转dataframe</span>
print(df)

<span class="hljs-comment"># 内嵌的JSON数据文件</span>
df = pd.read_json(<span class="hljs-string">'related_data/nested_list.json'</span>)
print(df)
<span class="hljs-comment"># 这时候需要json_normalize()将内嵌的数据完整解析 record_path设置要展开的内嵌数据名 meta展示无需展开的其他数据名</span>
<span class="hljs-keyword">with</span> open(<span class="hljs-string">'related_data/nested_list.json'</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f: 
    data = json.loads(f.read()) <span class="hljs-comment"># 使用python的json模块读取数据 字典结构</span>
df_nested_list = pd.json_normalize(data, record_path=[<span class="hljs-string">'students'</span>], meta=[<span class="hljs-string">'school_name'</span>, <span class="hljs-string">'class'</span>]) 
print(df_nested_list)

<span class="hljs-comment"># 更复杂的json文件</span>
<span class="hljs-keyword">with</span> open (<span class="hljs-string">'related_data/nested_mix.json'</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
    data = json.loads(f.read())
df = pd.json_normalize(data, record_path=[<span class="hljs-string">'students'</span>], meta=[<span class="hljs-string">'class'</span>, [<span class="hljs-string">'info'</span>, <span class="hljs-string">'president'</span>], [<span class="hljs-string">'info'</span>, <span class="hljs-string">'contacts'</span>, <span class="hljs-string">'tel'</span>]])
print(df)

<span class="hljs-comment"># 读取内嵌数据中的一组数据 glom模块允许我们使用. 来访问内嵌对象的属性</span>
df = pd.read_json(<span class="hljs-string">'related_data/nested_deep.json'</span>)
data = df[<span class="hljs-string">'students'</span>].apply(<span class="hljs-keyword">lambda</span> row: glom(row, <span class="hljs-string">'grade.math'</span>))
print(data)
</div></code></pre>
<h3 id="%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97">数据清洗</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-string">'''
数据清洗是对一些没有用的数据进行处理的过程
很多数据集存在数据缺失、数据格式错误或重复数据的情况，为了使数据分析更加准确，就需要对这些数据进行处理
有四种空数据：n/a NA -- na
'''</span>

<span class="hljs-comment"># 清洗空值 </span>
<span class="hljs-string">'''
dropna(axis=0, how='any', thresh=None, subset=None, inplace=False)

axis：默认为 0，表示逢空值剔除整行，如果设置参数 axis＝1 表示逢空值去掉整列。
how：默认为 'any' 如果一行（或一列）里任何一个数据有出现 NA 就去掉整行，如果设置 how='all' 一行（或列）都是 NA 才去掉这整行。
thresh：设置需要多少非空值的数据才可以保留下来的。
subset：设置想要检查的列。如果是多个列，可以使用列名的 list 作为参数。
inplace：如果设置 True，将计算得到的值直接覆盖之前的值并返回 None，修改的是源数据。

isnull() 判断各个单元格是否为空
'''</span>

df = pd.read_csv(<span class="hljs-string">'related_data/property-data.csv'</span>)
print(df.to_string())
print(df[<span class="hljs-string">'NUM_BEDROOMS'</span>])
print(df[<span class="hljs-string">'NUM_BEDROOMS'</span>].isnull()) <span class="hljs-comment"># na是空数据但没被判为空数据</span>

<span class="hljs-comment"># 指定空数据类型 na_values</span>
missing_values = [<span class="hljs-string">'n/a'</span>, <span class="hljs-string">'na'</span>, <span class="hljs-string">'--'</span>]
df = pd.read_csv(<span class="hljs-string">'related_data/property-data.csv'</span>, na_values=missing_values)
print(df[<span class="hljs-string">'NUM_BEDROOMS'</span>])
print(df[<span class="hljs-string">'NUM_BEDROOMS'</span>].isnull())

<span class="hljs-comment"># 删除空数据的行 默认返回新的DataFrame</span>
new_df = df.dropna()
print(new_df.to_string())
df.dropna(inplace=<span class="hljs-literal">True</span>) <span class="hljs-comment"># 直接修改原数据</span>
print(df.to_string())

<span class="hljs-comment"># 指定列有空值的行</span>
df = pd.read_csv(<span class="hljs-string">'related_data/property-data.csv'</span>)
df.dropna(subset=[<span class="hljs-string">'ST_NUM'</span>], inplace=<span class="hljs-literal">True</span>)
print(df.to_string())

<span class="hljs-comment"># fillna() 替换一些空字段</span>
df = pd.read_csv(<span class="hljs-string">'related_data/property-data.csv'</span>)
df.fillna(<span class="hljs-number">12345</span>, inplace=<span class="hljs-literal">True</span>)
print(df.to_string())

<span class="hljs-comment"># 指定某一列来替换数据</span>
df = pd.read_csv(<span class="hljs-string">'related_data/property-data.csv'</span>)
df[<span class="hljs-string">'PID'</span>].fillna(<span class="hljs-number">12345</span>, inplace=<span class="hljs-literal">True</span>)
print(df.to_string())

<span class="hljs-comment"># 替换空单元格的常用方法是计算列的均值、中位数或众数</span>
df = pd.read_csv(<span class="hljs-string">'related_data/property-data.csv'</span>)
x = df[<span class="hljs-string">'ST_NUM'</span>].mean() <span class="hljs-comment"># mean() 计算均值</span>
df_mean = df[<span class="hljs-string">'ST_NUM'</span>].fillna(x)
print(df_mean.to_string())

x = df[<span class="hljs-string">'ST_NUM'</span>].median() <span class="hljs-comment"># median() 计算中位数</span>
df_median = df[<span class="hljs-string">'ST_NUM'</span>].fillna(x)
print(df_median.to_string())

x = df[<span class="hljs-string">'ST_NUM'</span>].mode() <span class="hljs-comment"># mode() 计算众数</span>
df_mode = df[<span class="hljs-string">'ST_NUM'</span>].fillna(x)
print(df_mode.to_string())

<span class="hljs-comment"># 清洗格式错误数据</span>
<span class="hljs-comment"># 通过包含空单元格的行，或者将列中的所有单元格转换为相同格式的数据</span>
data = {
    <span class="hljs-string">'Date'</span>:[<span class="hljs-string">'2020/12/01'</span>, <span class="hljs-string">'2020/12/02'</span>, <span class="hljs-string">'20201226'</span>],
    <span class="hljs-string">'duration'</span>:[<span class="hljs-number">50</span>, <span class="hljs-number">40</span>, <span class="hljs-number">45</span>]
}
df = pd.DataFrame(data, index=[<span class="hljs-string">'day1'</span>, <span class="hljs-string">'day2'</span>, <span class="hljs-string">'day3'</span>])
df[<span class="hljs-string">'Date'</span>] = pd.to_datetime(df[<span class="hljs-string">'Date'</span>], format=<span class="hljs-string">'mixed'</span>) <span class="hljs-comment"># to_datetime格式化日期</span>
print(df.to_string())

data = {
    <span class="hljs-string">'Date'</span>:[<span class="hljs-string">'2020/12/01'</span>, <span class="hljs-string">'2020/12/02'</span>, <span class="hljs-string">'20201226'</span>],
    <span class="hljs-string">'duration'</span>:[<span class="hljs-number">50</span>, <span class="hljs-number">40</span>, <span class="hljs-number">12345</span>] <span class="hljs-comment"># 12345 数据是错误的</span>
}
df = pd.DataFrame(data)
df.loc[<span class="hljs-number">2</span>, <span class="hljs-string">'duration'</span>] = <span class="hljs-number">30</span> <span class="hljs-comment"># 修改错误日期  loc(row_index, column_index)</span>
print(df.to_string())

data = {
    <span class="hljs-string">'Date'</span>:[<span class="hljs-string">'2020/12/01'</span>, <span class="hljs-string">'2020/12/02'</span>, <span class="hljs-string">'20201226'</span>],
    <span class="hljs-string">'duration'</span>:[<span class="hljs-number">50</span>, <span class="hljs-number">40</span>, <span class="hljs-number">12345</span>] <span class="hljs-comment"># 12345 数据是错误的</span>
}
df = pd.DataFrame(data)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df.index:
    <span class="hljs-keyword">if</span> df.loc[x, <span class="hljs-string">'duration'</span>] &gt; <span class="hljs-number">120</span>: <span class="hljs-comment"># 设置条件语句将大于120的值设为120</span>
        df.loc[x, <span class="hljs-string">'duration'</span>] = <span class="hljs-number">120</span>
print(df.to_string())

data = {
    <span class="hljs-string">'Date'</span>:[<span class="hljs-string">'2020/12/01'</span>, <span class="hljs-string">'2020/12/02'</span>, <span class="hljs-string">'20201226'</span>],
    <span class="hljs-string">'duration'</span>:[<span class="hljs-number">50</span>, <span class="hljs-number">40</span>, <span class="hljs-number">12345</span>] <span class="hljs-comment"># 12345 数据是错误的</span>
}
df = pd.DataFrame(data)
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df.index:
    <span class="hljs-keyword">if</span> df.loc[x, <span class="hljs-string">'duration'</span>] &gt; <span class="hljs-number">120</span>: <span class="hljs-comment"># 将错误数据的行删除</span>
        df.drop(x, inplace=<span class="hljs-literal">True</span>)
print(df.to_string())

<span class="hljs-comment"># 清洗重复数据 </span>
data = {
    <span class="hljs-string">'name'</span>:[<span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Iven'</span>, <span class="hljs-string">'Rosenn'</span>, <span class="hljs-string">'Starry'</span>],
    <span class="hljs-string">'age'</span>:[<span class="hljs-number">21</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>] <span class="hljs-comment"># 数据重读</span>
}
df = pd.DataFrame(data)
<span class="hljs-comment"># duplicated() 如果重复返回True 否则False </span>
print(df.duplicated()) 
<span class="hljs-comment"># drop_duplicates()删除重复数据</span>
df.drop_duplicates(inplace=<span class="hljs-literal">True</span>)
print(df)
</div></code></pre>
<h3 id="%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0">常用函数</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-string">'''
读取数据

pd.read_csv(filename)	                读取 CSV 文件
pd.read_excel(filename)	                读取 Excel 文件
pd.read_sql(query, connection_object)	从 SQL 数据库读取数据
pd.read_json(json_string)	            从 JSON 字符串中读取数据
pd.read_html(url)	                    从 HTML 页面中读取数据
'''</span>
<span class="hljs-comment"># # 读取 CSV 文件</span>
<span class="hljs-comment"># df = pd.read_csv('data.csv')</span>
<span class="hljs-comment"># # 读取 Excel 文件</span>
<span class="hljs-comment"># df = pd.read_excel('data.xlsx')</span>
<span class="hljs-comment"># # 从 SQL 数据库读取数据</span>
<span class="hljs-comment"># import sqlite3</span>
<span class="hljs-comment"># conn = sqlite3.connect('database.db')</span>
<span class="hljs-comment"># df = pd.read_sql('SELECT * FROM table_name', conn)</span>
<span class="hljs-comment"># # 从 JSON 字符串中读取数据</span>
<span class="hljs-comment"># json_string = '{"name":"john", "age":30, "city":"chengdu"}'</span>
<span class="hljs-comment"># df = pd.read_json(json_string)</span>
<span class="hljs-comment"># # 从 HTML 页面中读取数据</span>
<span class="hljs-comment"># url = 'https://github.com/IvenStarry'</span>
<span class="hljs-comment"># dfs = pd.read_html(url)</span>
<span class="hljs-comment"># df = dfs[0]</span>
<span class="hljs-comment"># print(df)</span>

<span class="hljs-comment"># '''</span>
<span class="hljs-comment"># 查看数据</span>

<span class="hljs-comment"># df.head(n)	    显示前 n 行数据</span>
<span class="hljs-comment"># df.tail(n)	    显示后 n 行数据</span>
<span class="hljs-comment"># df.info()	    显示数据的信息，包括列名、数据类型、缺失值等</span>
<span class="hljs-comment"># df.describe()	显示数据的基本统计信息，包括均值、方差、最大值、最小值等</span>
<span class="hljs-comment"># df.shape    	显示数据的行数和列数</span>
<span class="hljs-comment"># '''</span>
<span class="hljs-comment"># print(df.head())</span>
<span class="hljs-comment"># print(df.tail())</span>
<span class="hljs-comment"># print(df.info())</span>
<span class="hljs-comment"># print(df.describe())</span>
<span class="hljs-comment"># print(df.shape)</span>

<span class="hljs-string">'''
数据清洗

df.dropna()	                        删除包含缺失值的行或列
df.fillna(value)	                将缺失值替换为指定的值
df.replace(old_value, new_value)	将指定值替换为新值
df.duplicated()	                    检查是否有重复的数据
df.drop_duplicates()	            删除重复的数据
'''</span>

<span class="hljs-string">'''
数据选择和切片

df[column_name]	                                选择指定的列；
df.loc[row_index, column_name]	                通过标签选择数据；
df.iloc[row_index, column_index]	            通过位置选择数据；
df.ix[row_index, column_name]	                通过标签或位置选择数据；
df.filter(items=[column_name1, column_name2])	选择指定的列；
df.filter(regex='regex')	                    选择列名匹配正则表达式的列；
df.sample(n)	                                随机选择 n 行数据。
'''</span>

<span class="hljs-string">'''
数组排序

df.sort_values(column_name)	                                            按照指定列的值排序
df.sort_values([column_name1, column_name2], ascending=[True, False])	按照多个列的值排序
Series.sort_values(axis=0, ascending=True)
DataFrame.sort_values(by, axis=0, ascending=True)                       by axis轴上某个索引或索引列表
df.sort_index(axis=0, ascending=True)	                                按照索引排序
'''</span>
a = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>), index=[<span class="hljs-string">'c'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'b'</span>])
print(a)
print(a.sort_index())
print(a.sort_index(ascending=<span class="hljs-literal">False</span>))
print(a.sort_index(axis=<span class="hljs-number">1</span>, ascending=<span class="hljs-literal">False</span>))
print(a.sort_values(<span class="hljs-number">2</span>, ascending=<span class="hljs-literal">False</span>))
print(a.sort_values(<span class="hljs-string">'a'</span>, axis=<span class="hljs-number">1</span>, ascending=<span class="hljs-literal">False</span>))

<span class="hljs-comment"># 若有NAN 排序统一置于末尾</span>
a = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>), index=[<span class="hljs-string">'c'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'b'</span>])
b = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), index=[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>])
print(a + b)
print((a+b).sort_values(<span class="hljs-number">2</span>))
print((a+b).sort_values(<span class="hljs-number">2</span>, ascending=<span class="hljs-literal">False</span>))

<span class="hljs-string">'''
数组的分组和聚合

df.groupby(column_name)                        	 按照指定列进行分组；
df.aggregate(function_name)	                     对分组后的数据进行聚合操作；
df.pivot_table(values, index, columns, aggfunc)	 生成透视表。
'''</span>

<span class="hljs-string">'''
数据合并

pd.concat([df1, df2])	将多个数据框按照行或列进行合并；
pd.merge(df1, df2, on=column_name)	按照指定列将两个数据框进行合并。
'''</span>

<span class="hljs-string">'''
数据选择和过滤

df.loc[row_indexer, column_indexer]	    按标签选择行和列。
df.iloc[row_indexer, column_indexer]	按位置选择行和列。
df[df['column_name'] &gt; value]	        选择列中满足条件的行。
df.query('column_name &gt; value')	        使用字符串表达式选择列中满足条件的行。
'''</span>

<span class="hljs-string">'''
数据统计和描述

df.describe()	计算基本统计信息，如均值、标准差、最小值、最大值等。
df.mean()	    计算每列的平均值。
df.median()	    计算每列的中位数。
df.mode()	    计算每列的众数。
df.count()	    计算每列非缺失值的数量。
.argmin()       计算数据最大值的索引位置(自动索引) 或被弃用
.argmax()       计算数据最小值的索引位置(自动索引)
.idxmin()       计算数据最大值的索引(自定义索引)
.idxmax()       计算数据最小值的索引(自定义索引)
'''</span>

df = pd.read_json(<span class="hljs-string">'related_data/data.json'</span>)
print(df)
<span class="hljs-comment"># df = df.dropna()</span>
<span class="hljs-comment"># print(df)</span>
df = df.fillna({<span class="hljs-string">'age'</span>:<span class="hljs-number">0</span>, <span class="hljs-string">'score'</span>:<span class="hljs-number">0</span>})
print(df)
<span class="hljs-comment"># 重命名列名</span>
df = df.rename(columns={<span class="hljs-string">'name'</span>:<span class="hljs-string">'姓名'</span>, <span class="hljs-string">'age'</span>:<span class="hljs-string">'年龄'</span>, <span class="hljs-string">'gender'</span>:<span class="hljs-string">'性别'</span>, <span class="hljs-string">'score'</span>:<span class="hljs-string">'成绩'</span>})
print(df)
<span class="hljs-comment"># 按成绩排序</span>
df = df.sort_values(by=<span class="hljs-string">'成绩'</span>, ascending=<span class="hljs-literal">False</span>)
print(df)
<span class="hljs-comment"># 按性别分组计算平均年龄和成绩</span>
grouped = df.groupby(<span class="hljs-string">'性别'</span>).agg({<span class="hljs-string">'年龄'</span>:<span class="hljs-string">'mean'</span>, <span class="hljs-string">'成绩'</span>:<span class="hljs-string">'mean'</span>}) <span class="hljs-comment"># df.aggregate(function_name) 在这个例子中，对 年龄和成绩 应用了 mean 函数</span>
print(grouped)
<span class="hljs-comment"># 选择成绩大于90的行，并只保留姓名和成绩两列</span>
sorted = df.loc[df[<span class="hljs-string">'成绩'</span>] &gt;= <span class="hljs-number">90</span>, [<span class="hljs-string">'姓名'</span> , <span class="hljs-string">'成绩'</span>]]
print(sorted)
print(df.count())
print(df.idxmax())

<span class="hljs-string">'''
累计统计分析函数

.cumsum()             前n个数的和
.cumprod()            前n个数的积
.cummax()             前n个数的最大值
.cummin()             前n个数的最小值

.rolling(w).sum()     依次计算相邻w个元素的和
.rolling(w).mean()    依次计算相邻w个元素的算术平均值
.rolling(w).var()     依次计算相邻w个元素的方差
.rolling(w).std()     依次计算相邻w个元素的标准差
.rolling(w).min()     依次计算相邻w个元素的最小值
.rolling(w).max()     依次计算相邻w个元素的最大值
'''</span>

a = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>), index=[<span class="hljs-string">'c'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'b'</span>])
print(a)
print(a.cumsum() )
print(a.cumprod())
print(a.cummax() )
print(a.cummin() )
print(a.rolling(<span class="hljs-number">2</span>).sum()) <span class="hljs-comment"># 计算包括自己的前两项和 第一列前面没有数值 返回NAN</span>
print(a.rolling(<span class="hljs-number">2</span>).mean())
print(a.rolling(<span class="hljs-number">2</span>).var())
print(a.rolling(<span class="hljs-number">2</span>).std())
print(a.rolling(<span class="hljs-number">2</span>).min())
print(a.rolling(<span class="hljs-number">2</span>).max()) 
</div></code></pre>
<h3 id="%E7%9B%B8%E5%85%B3%E6%80%A7%E5%88%86%E6%9E%90">相关性分析</h3>
<p><img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407311319986.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407311317122.png" alt="">
<img src="https://cdn.jsdelivr.net/gh/IvenStarry/Image/MarkdownImage/202407311318545.png" alt=""></p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-string">'''
df.cov()  计算协方差矩阵
df.corr() 计算相关系数矩阵 pearson spearman kendall系数

在pandas中，数据的相关性分析是通过计算不同变量之间的相关系数来了解它们之间的关系
数据相关性是一项重要的分析任务，可以帮助我们理解各个变量之间的关系
使用 corr() 方法计算数据集中每列之间的关系

df.corr(method='pearson', minperiods=1)
method (可选): 字符串类型，用于指定计算相关系数的方法。默认是 'pearson'，
                还可以选择 'kendall'（Kendall Tau 相关系数）或 'spearman'（Spearman 秩相关系数）。
min_periods (可选): 表示计算相关系数时所需的最小观测值数量。默认值是 1，即只要有至少一个非空值，就会进行计算。
                    如果指定了 min_periods，并且在某些列中的非空值数量小于该值，则相应列的相关系数将被设为 NaN。

返回一个相关系数矩阵，矩阵的行和列对应数据框的列名，矩阵的元素是对应列之间的相关系数。

常见的相关性系数包括 Pearson 相关系数和 Spearman 秩相关系数：
Pearson 相关系数: 即皮尔逊相关系数，用于衡量了两个变量之间的线性关系强度和方向。它的取值范围在 -1 到 1 之间，其中 -1 表示完全负相关，
                    1 表示完全正相关，0 表示无线性相关。可以使用 corr() 方法计算数据框中各列之间的 Pearson 相关系数。
Spearman 相关系数：即斯皮尔曼相关系数，是一种秩相关系数。用于衡量两个变量之间的单调关系，即不一定是线性关系。
                它通过比较变量的秩次来计算相关性。可以使用 corr(method='spearman') 方法计算数据框中各列之间的 Spearman 相关系数。
'''</span>

data = {<span class="hljs-string">'A'</span>:[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], <span class="hljs-string">'B'</span>:[<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]}
df =pd.DataFrame(data)
<span class="hljs-comment"># 计算 pearson 相关系数</span>
correlation_matrix = df.corr()
print(correlation_matrix) <span class="hljs-comment"># 因为数据集是线性相关的，因此主对角线值为1，副对角线值为-1完全负相关</span>
<span class="hljs-comment"># 计算 spearman 秩相关系数</span>
correlation_matrix = df.corr(method=<span class="hljs-string">'spearman'</span>)
print(correlation_matrix) <span class="hljs-comment"># 结果与pearman相关系数矩阵相同，因为两个变量之间完全负相关</span>

<span class="hljs-comment"># 可视化相关性   使用Seaborn库绘制更加精美的相关系数矩阵图像</span>
sns.heatmap(correlation_matrix, annot=<span class="hljs-literal">True</span>, cmap=<span class="hljs-string">'coolwarm'</span>, fmt=<span class="hljs-string">'.2f'</span>) <span class="hljs-comment"># 绘制热力图 annot: 默认为False，为True的话，会在格子上显示数字</span>
plt.show()
</div></code></pre>
<h3 id="%E5%AE%9E%E4%BE%8B%E6%88%BF%E4%BB%B7%E6%B6%A8%E5%B9%85%E4%B8%8Em2%E5%A2%9E%E5%B9%85%E7%9A%84%E7%9B%B8%E5%85%B3%E6%80%A7">实例_房价涨幅与M2增幅的相关性</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

hprice = pd.Series([<span class="hljs-number">3.04</span>, <span class="hljs-number">22.93</span>, <span class="hljs-number">12.75</span>, <span class="hljs-number">22.6</span>, <span class="hljs-number">12.33</span>], index=[<span class="hljs-string">'2008'</span>, <span class="hljs-string">'2009'</span>, <span class="hljs-string">'2010'</span>, <span class="hljs-string">'2011'</span>, <span class="hljs-string">'2012'</span>])
m2 = pd.Series([<span class="hljs-number">8.18</span>, <span class="hljs-number">18.38</span>, <span class="hljs-number">9.13</span>, <span class="hljs-number">7.82</span>, <span class="hljs-number">6.69</span>], index=[<span class="hljs-string">'2008'</span>, <span class="hljs-string">'2009'</span>, <span class="hljs-string">'2010'</span>, <span class="hljs-string">'2011'</span>, <span class="hljs-string">'2012'</span>])

plt.rcParams[<span class="hljs-string">'font.family'</span>] = <span class="hljs-string">'Source Han Sans CN'</span>
plt.plot(hprice, <span class="hljs-string">'-o'</span>)
plt.plot(m2, <span class="hljs-string">'-x'</span>)
plt.title(<span class="hljs-string">f'相关系数矩阵：<span class="hljs-subst">{hprice.corr(m2)}</span>'</span>)
plt.show()
</div></code></pre>

</body>
</html>
